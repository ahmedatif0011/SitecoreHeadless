{"ast":null,"code":"import _asyncToGenerator from \"D:/JSS-APP/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// © Sitecore Corporation A/S. All rights reserved. Sitecore® is a registered trademark of Sitecore Corporation A/S.\nimport { createCookieString, getCookie } from '@sitecore-cloudsdk/utils';\nimport { fetchBrowserIdFromEdgeProxy } from '../browser-id/fetch-browser-id-from-edge-proxy';\nimport { getGuestId } from '../init/get-guest-id';\nimport { getDefaultCookieAttributes } from './get-default-cookie-attributes';\n/**\n * Creates and adds the cookie to the document\n * @param settings - The CookieSettings settings object\n */\nexport function createCookies(_x) {\n  return _createCookies.apply(this, arguments);\n}\nfunction _createCookies() {\n  _createCookies = _asyncToGenerator(function* (settings) {\n    const attributes = getDefaultCookieAttributes(settings.cookieSettings.cookieExpiryDays, settings.cookieSettings.cookieDomain);\n    const browserIdCookie = getCookie(window.document.cookie, settings.cookieSettings.cookieNames.browserId);\n    if (browserIdCookie) {\n      const guestIdCookie = getCookie(window.document.cookie, settings.cookieSettings.cookieNames.guestId);\n      if (guestIdCookie) return;\n      const guestId = yield getGuestId(browserIdCookie.value, settings.sitecoreEdgeContextId, settings.sitecoreEdgeUrl);\n      document.cookie = createCookieString(settings.cookieSettings.cookieNames.guestId, guestId, attributes);\n      return;\n    }\n    const {\n      browserId,\n      guestId\n    } = yield fetchBrowserIdFromEdgeProxy(settings.sitecoreEdgeUrl, settings.sitecoreEdgeContextId);\n    document.cookie = createCookieString(settings.cookieSettings.cookieNames.browserId, browserId, attributes);\n    document.cookie = createCookieString(settings.cookieSettings.cookieNames.guestId, guestId, attributes);\n  });\n  return _createCookies.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}