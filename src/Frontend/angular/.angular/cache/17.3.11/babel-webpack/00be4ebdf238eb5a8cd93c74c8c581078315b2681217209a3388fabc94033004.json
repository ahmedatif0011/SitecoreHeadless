{"ast":null,"code":"/**\n * A helper to assign timeouts to fetch or other promises\n * Useful in nextjs middleware until fetch.signal is fully supported by Vercel edge functions\n */\nclass TimeoutPromise {\n  constructor(timeout) {\n    this.timeout = timeout;\n    this.timeoutId = undefined;\n  }\n  /**\n   * Creates a timeout promise\n   */\n  get start() {\n    return new Promise((_, reject) => {\n      this.timeoutId = setTimeout(() => {\n        const abortError = new Error(`Request timed out, timeout of ${this.timeout}ms is exceeded`);\n        abortError.name = 'AbortError';\n        reject(abortError);\n      }, this.timeout);\n    });\n  }\n  /**\n   * Clears the timeout from timeout promise\n   */\n  clear() {\n    this.timeoutId && clearTimeout(this.timeoutId);\n  }\n}\nexport { TimeoutPromise as default };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}