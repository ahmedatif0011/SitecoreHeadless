{"ast":null,"code":"import _asyncToGenerator from \"D:/JSS-APP/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { BaseEvent } from '../base-event';\nimport { ErrorMessages } from '../../consts';\nimport { MAX_EXT_ATTRIBUTES } from '../consts';\nimport { flattenObject } from '@sitecore-cloudsdk/utils';\nexport class CustomEvent extends BaseEvent {\n  /**\n   * A class that extends from {@link BaseEvent} and has all the required functionality to send a VIEW event\n   * @param args - Unified object containing the required properties\n   */\n  constructor(args) {\n    const {\n      channel,\n      currency,\n      language,\n      page,\n      type,\n      extensionData,\n      searchData,\n      ...rest\n    } = args.eventData;\n    super({\n      channel,\n      currency,\n      language,\n      page\n    }, args.id);\n    this.extensionData = {};\n    this.sendEvent = args.sendEvent;\n    this.settings = args.settings;\n    this.customEventPayload = {\n      type,\n      ...rest\n    };\n    if (extensionData) this.extensionData = flattenObject({\n      object: extensionData\n    });\n    const numberOfExtensionDataProperties = Object.entries(this.extensionData).length;\n    if (numberOfExtensionDataProperties > MAX_EXT_ATTRIBUTES) throw new Error(ErrorMessages.IV_0005);\n    if (numberOfExtensionDataProperties > 0) this.customEventPayload.ext = this.extensionData;\n    if (searchData) this.customEventPayload.sc_search = {\n      data: searchData,\n      metadata: {\n        // eslint-disable-next-line @typescript-eslint/naming-convention\n        ut_api_version: '1.0'\n      }\n    };\n  }\n  /**\n   * Sends the event to Sitecore EP\n   * @returns - A promise that resolves with either the Sitecore EP response object or null\n   */\n  send() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const baseAttr = _this.mapBaseEventPayload();\n      const fetchBody = Object.assign({}, _this.customEventPayload, baseAttr);\n      return yield _this.sendEvent(fetchBody, _this.settings);\n    })();\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}