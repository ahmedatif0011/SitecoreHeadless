{"ast":null,"code":"import _asyncToGenerator from \"D:/JSS-APP/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// © Sitecore Corporation A/S. All rights reserved. Sitecore® is a registered trademark of Sitecore Corporation A/S.\nimport { API_VERSION, debug, processDebugResponse } from '@sitecore-cloudsdk/core/internal';\nimport { EVENTS_NAMESPACE, PACKAGE_VERSION, X_CLIENT_SOFTWARE_ID } from '../../consts';\n/**\n * This factory function sends an event to Edge Proxy\n * @param body - The event data to send\n * @param settings - The global settings\n */\nexport function sendEvent(_x, _x2) {\n  return _sendEvent.apply(this, arguments);\n}\nfunction _sendEvent() {\n  _sendEvent = _asyncToGenerator(function* (body, settings) {\n    // eslint-disable-next-line max-len\n    const eventUrl = `${settings.sitecoreEdgeUrl}/v1/events/${API_VERSION}/events?sitecoreContextId=${settings.sitecoreEdgeContextId}&siteId=${settings.siteName}`;\n    const startTimestamp = Date.now();\n    let debugResponse = {};\n    const fetchOptions = {\n      body: JSON.stringify(body),\n      headers: {\n        /* eslint-disable @typescript-eslint/naming-convention */\n        'Content-Type': 'application/json',\n        'X-Client-Software-ID': X_CLIENT_SOFTWARE_ID,\n        'X-Library-Version': PACKAGE_VERSION\n        /* eslint-enable @typescript-eslint/naming-convention */\n      },\n      method: 'POST'\n    };\n    debug(EVENTS_NAMESPACE)('Events request: %s with options: %O', eventUrl, fetchOptions);\n    return yield fetch(eventUrl, fetchOptions).then(response => {\n      debugResponse = processDebugResponse(EVENTS_NAMESPACE, response);\n      return response.json();\n    }).then(data => {\n      debugResponse.body = data;\n      debug(EVENTS_NAMESPACE)('Events response in %dms : %O', Date.now() - startTimestamp, debugResponse);\n      return data;\n    }).catch(error => {\n      debug(EVENTS_NAMESPACE)('Error: events response: %O', error);\n      return null;\n    });\n  });\n  return _sendEvent.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}