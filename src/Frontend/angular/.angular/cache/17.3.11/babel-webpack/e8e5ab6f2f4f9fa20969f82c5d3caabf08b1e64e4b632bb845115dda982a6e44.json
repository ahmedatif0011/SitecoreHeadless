{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.JssTranslationServerLoaderService = exports.dictionaryStateKey = void 0;\nconst tslib_1 = require(\"tslib\");\nconst core_1 = require(\"@angular/core\");\nconst rxjs_1 = require(\"rxjs\");\nconst i0 = tslib_1.__importStar(require(\"@angular/core\"));\nexports.dictionaryStateKey = (0, core_1.makeStateKey)('dictionary');\nlet JssTranslationServerLoaderService = /*#__PURE__*/(() => {\n  class JssTranslationServerLoaderService {\n    serverViewBag;\n    transferState;\n    constructor(\n    // this initial state from sitecore is injected by server.bundle for \"integrated\" mode\n    serverViewBag, transferState) {\n      this.serverViewBag = serverViewBag;\n      this.transferState = transferState;\n    }\n    getTranslation(_lang) {\n      // read initial dictionary from data injected via server.bundle wrapper\n      const dictionary = this.serverViewBag.dictionary;\n      // set the dictionary in transfer state for the client\n      // since for ng-translate there is no obvious way to pass the server side dictionary to the client\n      // https://github.com/ngx-translate/core/issues/1207#issuecomment-700741671\n      this.transferState.set(exports.dictionaryStateKey, dictionary);\n      if (dictionary) {\n        return (0, rxjs_1.of)(dictionary);\n      }\n      console.warn('Dictionary was not present in SSR viewbag. Translations will not be server-side rendered.');\n      return rxjs_1.EMPTY;\n    }\n    static ɵfac = function JssTranslationServerLoaderService_Factory(t) {\n      return new (t || JssTranslationServerLoaderService)(i0.ɵɵinject('JSS_SERVER_VIEWBAG'), i0.ɵɵinject(i0.TransferState));\n    };\n    static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: JssTranslationServerLoaderService,\n      factory: JssTranslationServerLoaderService.ɵfac\n    });\n  }\n  return JssTranslationServerLoaderService;\n})();\nexports.JssTranslationServerLoaderService = JssTranslationServerLoaderService;","map":null,"metadata":{},"sourceType":"script","externalDependencies":[]}