{"ast":null,"code":"import { createNgModule, Inject, Injectable } from '@angular/core';\nimport { DYNAMIC_COMPONENT, PLACEHOLDER_COMPONENTS, PLACEHOLDER_LAZY_COMPONENTS } from './placeholder.token';\nimport { RawComponent } from '../components/raw.component';\nimport { isRawRendering } from '../components/rendering';\nimport * as i0 from \"@angular/core\";\nexport let JssComponentFactoryService = /*#__PURE__*/(() => {\n  class JssComponentFactoryService {\n    injector;\n    components;\n    lazyComponents;\n    componentMap;\n    lazyComponentMap;\n    constructor(injector, components, lazyComponents) {\n      this.injector = injector;\n      this.components = components;\n      this.lazyComponents = lazyComponents;\n      this.componentMap = new Map();\n      this.lazyComponentMap = new Map();\n      this.components.forEach(c => this.componentMap.set(c.name, c));\n      if (this.lazyComponents) {\n        this.lazyComponents.forEach(c => this.lazyComponentMap.set(c.path, c));\n      }\n    }\n    getComponent(component) {\n      const loadedComponent = this.componentMap.get(component.componentName);\n      if (loadedComponent) {\n        return Promise.resolve({\n          componentDefinition: this.applySXAParams(component),\n          componentImplementation: loadedComponent.type,\n          canActivate: loadedComponent.canActivate,\n          resolve: loadedComponent.resolve\n        });\n      }\n      const lazyComponent = this.lazyComponentMap.get(component.componentName);\n      if (lazyComponent) {\n        return lazyComponent.loadChildren().then(lazyChild => {\n          let componentType = null;\n          const moduleRef = createNgModule(lazyChild, this.injector);\n          const dynamicComponentType = moduleRef.injector.get(DYNAMIC_COMPONENT);\n          if (!dynamicComponentType) {\n            throw new Error(`JssComponentFactoryService: Lazy load module for component \"${lazyComponent.path}\" missing DYNAMIC_COMPONENT provider. Missing JssModule.forChild()?`);\n          }\n          if (component.componentName in dynamicComponentType) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            componentType = dynamicComponentType[component.componentName];\n          } else {\n            if (typeof dynamicComponentType === 'function') {\n              componentType = dynamicComponentType;\n            } else {\n              throw new Error(`JssComponentFactoryService: Lazy load module for component \"${lazyComponent.path}\" missing DYNAMIC_COMPONENT provider. Missing JssModule.forChild()?`);\n            }\n          }\n          return {\n            componentDefinition: this.applySXAParams(component),\n            componentImplementation: componentType,\n            componentModuleRef: moduleRef,\n            canActivate: lazyComponent.canActivate,\n            resolve: lazyComponent.resolve\n          };\n        });\n      }\n      return Promise.resolve({\n        componentDefinition: component\n      });\n    }\n    getComponents(components) {\n      // acquire all components and keep them in order while handling their potential async-ness\n      return Promise.all(components.map(component => isRawRendering(component) ? this.getRawComponent(component) : this.getComponent(component)));\n    }\n    getRawComponent(component) {\n      return Promise.resolve({\n        componentImplementation: RawComponent,\n        componentDefinition: component\n      });\n    }\n    applySXAParams(rendering) {\n      // Provide aggregated SXA styles on params 'styles'\n      const styles = [];\n      if (rendering.params?.GridParameters) {\n        styles.push(rendering.params.GridParameters.trim());\n      }\n      if (rendering.params?.Styles) {\n        styles.push(rendering.params.Styles.trim());\n      }\n      if (rendering.params && styles.length > 0) {\n        rendering.params.styles = styles.join(' ');\n      }\n      return rendering;\n    }\n    static ɵfac = function JssComponentFactoryService_Factory(t) {\n      return new (t || JssComponentFactoryService)(i0.ɵɵinject(i0.Injector), i0.ɵɵinject(PLACEHOLDER_COMPONENTS), i0.ɵɵinject(PLACEHOLDER_LAZY_COMPONENTS));\n    };\n    static ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n      token: JssComponentFactoryService,\n      factory: JssComponentFactoryService.ɵfac\n    });\n  }\n  return JssComponentFactoryService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNzLWNvbXBvbmVudC1mYWN0b3J5LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2VydmljZXMvanNzLWNvbXBvbmVudC1mYWN0b3J5LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUErQixNQUFNLGVBQWUsQ0FBQztBQUVoRyxPQUFPLEVBR0wsaUJBQWlCLEVBSWpCLHNCQUFzQixFQUN0QiwyQkFBMkIsR0FDNUIsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDM0QsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHlCQUF5QixDQUFDOztBQWdCekQsTUFBTSxPQUFPLDBCQUEwQjtJQUszQjtJQUNnQztJQUNLO0lBTnZDLFlBQVksQ0FBb0M7SUFDaEQsZ0JBQWdCLENBQXNDO0lBRTlELFlBQ1UsUUFBa0IsRUFDYyxVQUFrQyxFQUM3QixjQUF3QztRQUY3RSxhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ2MsZUFBVSxHQUFWLFVBQVUsQ0FBd0I7UUFDN0IsbUJBQWMsR0FBZCxjQUFjLENBQTBCO1FBRXJGLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUVsQyxJQUFJLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWpFLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3hCLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FB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RUFBRSxZQUFZO1lBQ3JDLG1CQUFtQixFQUFFLFNBQVM7U0FDL0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVPLGNBQWMsQ0FBQyxTQUE2QjtRQUNsRCxtREFBbUQ7UUFDbkQsTUFBTSxNQUFNLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRSxjQUFjLEVBQUUsQ0FBQztZQUNyQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDdEQsQ0FBQztRQUNELElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsQ0FBQztZQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFDOUMsQ0FBQztRQUNELElBQUksU0FBUyxDQUFDLE1BQU0sSUFBSSxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQzFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDN0MsQ0FBQztRQUNELE9BQU8sU0FBUyxDQUFDO0lBQ25CLENBQUM7d0dBdkdVLDBCQUEwQiwwQ0FNM0Isc0JBQXNCLGFBQ3RCLDJCQUEyQjs0R0FQMUIsMEJBQTBCOzs0RkFBMUIsMEJBQTBCO2tCQUR0QyxVQUFVOzswQkFPTixNQUFNOzJCQUFDLHNCQUFzQjs7MEJBQzdCLE1BQU07MkJBQUMsMkJBQTJCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlTmdNb2R1bGUsIEluamVjdCwgSW5qZWN0YWJsZSwgSW5qZWN0b3IsIE5nTW9kdWxlUmVmLCBUeXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IENvbXBvbmVudFJlbmRlcmluZywgSHRtbEVsZW1lbnRSZW5kZXJpbmcgfSBmcm9tICdAc2l0ZWNvcmUtanNzL3NpdGVjb3JlLWpzcy9sYXlvdXQnO1xyXG5pbXBvcnQge1xyXG4gIENvbXBvbmVudE5hbWVBbmRNb2R1bGUsXHJcbiAgQ29tcG9uZW50TmFtZUFuZFR5cGUsXHJcbiAgRFlOQU1JQ19DT01QT05FTlQsXHJcbiAgSnNzQ2FuQWN0aXZhdGUsXHJcbiAgSnNzQ2FuQWN0aXZhdGVGbixcclxuICBKc3NSZXNvbHZlLFxyXG4gIFBMQUNFSE9MREVSX0NPTVBPTkVOVFMsXHJcbiAgUExBQ0VIT0xERVJfTEFaWV9DT01QT05FTlRTLFxyXG59IGZyb20gJy4vcGxhY2Vob2xkZXIudG9rZW4nO1xyXG5pbXBvcnQgeyBSYXdDb21wb25lbnQgfSBmcm9tICcuLi9jb21wb25lbnRzL3Jhdy5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBpc1Jhd1JlbmRlcmluZyB9IGZyb20gJy4uL2NvbXBvbmVudHMvcmVuZGVyaW5nJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50RmFjdG9yeVJlc3VsdCB7XHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICBjb21wb25lbnRJbXBsZW1lbnRhdGlvbj86IFR5cGU8YW55PjtcclxuICBjb21wb25lbnREZWZpbml0aW9uOiBDb21wb25lbnRSZW5kZXJpbmcgfCBIdG1sRWxlbWVudFJlbmRlcmluZztcclxuICBjb21wb25lbnRNb2R1bGVSZWY/OiBOZ01vZHVsZVJlZjx1bmtub3duPjtcclxuICBjYW5BY3RpdmF0ZT86XHJcbiAgICB8IEpzc0NhbkFjdGl2YXRlXHJcbiAgICB8IFR5cGU8SnNzQ2FuQWN0aXZhdGU+XHJcbiAgICB8IEpzc0NhbkFjdGl2YXRlRm5cclxuICAgIHwgQXJyYXk8SnNzQ2FuQWN0aXZhdGUgfCBKc3NDYW5BY3RpdmF0ZUZuIHwgVHlwZTxKc3NDYW5BY3RpdmF0ZT4+O1xyXG4gIHJlc29sdmU/OiB7IFtrZXk6IHN0cmluZ106IEpzc1Jlc29sdmU8YW55PiB8IFR5cGU8SnNzUmVzb2x2ZTxhbnk+PiB9O1xyXG59XHJcblxyXG5ASW5qZWN0YWJsZSgpXHJcbmV4cG9ydCBjbGFzcyBKc3NDb21wb25lbnRGYWN0b3J5U2VydmljZSB7XHJcbiAgcHJpdmF0ZSBjb21wb25lbnRNYXA6IE1hcDxzdHJpbmcsIENvbXBvbmVudE5hbWVBbmRUeXBlPjtcclxuICBwcml2YXRlIGxhenlDb21wb25lbnRNYXA6IE1hcDxzdHJpbmcsIENvbXBvbmVudE5hbWVBbmRNb2R1bGU+O1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgaW5qZWN0b3I6IEluamVjdG9yLFxyXG4gICAgQEluamVjdChQTEFDRUhPTERFUl9DT01QT05FTlRTKSBwcml2YXRlIGNvbXBvbmVudHM6IENvbXBvbmVudE5hbWVBbmRUeXBlW10sXHJcbiAgICBASW5qZWN0KFBMQUNFSE9MREVSX0xBWllfQ09NUE9ORU5UUykgcHJpdmF0ZSBsYXp5Q29tcG9uZW50czogQ29tcG9uZW50TmFtZUFuZE1vZHVsZVtdXHJcbiAgKSB7XHJcbiAgICB0aGlzLmNvbXBvbmVudE1hcCA9IG5ldyBNYXAoKTtcclxuICAgIHRoaXMubGF6eUNvbXBvbmVudE1hcCA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICB0aGlzLmNvbXBvbmVudHMuZm9yRWFjaCgoYykgPT4gdGhpcy5jb21wb25lbnRNYXAuc2V0KGMubmFtZSwgYykpO1xyXG5cclxuICAgIGlmICh0aGlzLmxhenlDb21wb25lbnRzKSB7XHJcbiAgICAgIHRoaXMubGF6eUNvbXBvbmVudHMuZm9yRWFjaCgoYykgPT4gdGhpcy5sYXp5Q29tcG9uZW50TWFwLnNldChjLnBhdGgsIGMpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldENvbXBvbmVudChjb21wb25lbnQ6IENvbXBvbmVudFJlbmRlcmluZyk6IFByb21pc2U8Q29tcG9uZW50RmFjdG9yeVJlc3VsdD4ge1xyXG4gICAgY29uc3QgbG9hZGVkQ29tcG9uZW50ID0gdGhpcy5jb21wb25lbnRNYXAuZ2V0KGNvbXBvbmVudC5jb21wb25lbnROYW1lKTtcclxuXHJcbiAgICBpZiAobG9hZGVkQ29tcG9uZW50KSB7XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xyXG4gICAgICAgIGNvbXBvbmVudERlZmluaXRpb246IHRoaXMuYXBwbHlTWEFQYXJhbXMoY29tcG9uZW50KSxcclxuICAgICAgICBjb21wb25lbnRJbXBsZW1lbnRhdGlvbjogbG9hZGVkQ29tcG9uZW50LnR5cGUsXHJcbiAgICAgICAgY2FuQWN0aXZhdGU6IGxvYWRlZENvbXBvbmVudC5jYW5BY3RpdmF0ZSxcclxuICAgICAgICByZXNvbHZlOiBsb2FkZWRDb21wb25lbnQucmVzb2x2ZSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbGF6eUNvbXBvbmVudCA9IHRoaXMubGF6eUNvbXBvbmVudE1hcC5nZXQoY29tcG9uZW50LmNvbXBvbmVudE5hbWUpO1xyXG5cclxuICAgIGlmIChsYXp5Q29tcG9uZW50KSB7XHJcbiAgICAgIHJldHVybiBsYXp5Q29tcG9uZW50LmxvYWRDaGlsZHJlbigpLnRoZW4oKGxhenlDaGlsZCkgPT4ge1xyXG4gICAgICAgIGxldCBjb21wb25lbnRUeXBlID0gbnVsbDtcclxuICAgICAgICBjb25zdCBtb2R1bGVSZWYgPSBjcmVhdGVOZ01vZHVsZShsYXp5Q2hpbGQsIHRoaXMuaW5qZWN0b3IpO1xyXG4gICAgICAgIGNvbnN0IGR5bmFtaWNDb21wb25lbnRUeXBlID0gbW9kdWxlUmVmLmluamVjdG9yLmdldChEWU5BTUlDX0NPTVBPTkVOVCk7XHJcbiAgICAgICAgaWYgKCFkeW5hbWljQ29tcG9uZW50VHlwZSkge1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICBgSnNzQ29tcG9uZW50RmFjdG9yeVNlcnZpY2U6IExhenkgbG9hZCBtb2R1bGUgZm9yIGNvbXBvbmVudCBcIiR7bGF6eUNvbXBvbmVudC5wYXRofVwiIG1pc3NpbmcgRFlOQU1JQ19DT01QT05FTlQgcHJvdmlkZXIuIE1pc3NpbmcgSnNzTW9kdWxlLmZvckNoaWxkKCk/YFxyXG4gICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb21wb25lbnQuY29tcG9uZW50TmFtZSBpbiBkeW5hbWljQ29tcG9uZW50VHlwZSkge1xyXG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgIGNvbXBvbmVudFR5cGUgPSAoZHluYW1pY0NvbXBvbmVudFR5cGUgYXMgeyBbczogc3RyaW5nXTogYW55IH0pW2NvbXBvbmVudC5jb21wb25lbnROYW1lXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgaWYgKHR5cGVvZiBkeW5hbWljQ29tcG9uZW50VHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICBjb21wb25lbnRUeXBlID0gZHluYW1pY0NvbXBvbmVudFR5cGU7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgYEpzc0NvbXBvbmVudEZhY3RvcnlTZXJ2aWNlOiBMYXp5IGxvYWQgbW9kdWxlIGZvciBjb21wb25lbnQgXCIke2xhenlDb21wb25lbnQucGF0aH1cIiBtaXNzaW5nIERZTkFNSUNfQ09NUE9ORU5UIHByb3ZpZGVyLiBNaXNzaW5nIEpzc01vZHVsZS5mb3JDaGlsZCgpP2BcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBjb21wb25lbnREZWZpbml0aW9uOiB0aGlzLmFwcGx5U1hBUGFyYW1zKGNvbXBvbmVudCksXHJcbiAgICAgICAgICBjb21wb25lbnRJbXBsZW1lbnRhdGlvbjogY29tcG9uZW50VHlwZSxcclxuICAgICAgICAgIGNvbXBvbmVudE1vZHVsZVJlZjogbW9kdWxlUmVmLFxyXG4gICAgICAgICAgY2FuQWN0aXZhdGU6IGxhenlDb21wb25lbnQuY2FuQWN0aXZhdGUsXHJcbiAgICAgICAgICByZXNvbHZlOiBsYXp5Q29tcG9uZW50LnJlc29sdmUsXHJcbiAgICAgICAgfTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XHJcbiAgICAgIGNvbXBvbmVudERlZmluaXRpb246IGNvbXBvbmVudCxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q29tcG9uZW50cyhcclxuICAgIGNvbXBvbmVudHM6IEFycmF5PENvbXBvbmVudFJlbmRlcmluZyB8IEh0bWxFbGVtZW50UmVuZGVyaW5nPlxyXG4gICk6IFByb21pc2U8Q29tcG9uZW50RmFjdG9yeVJlc3VsdFtdPiB7XHJcbiAgICAvLyBhY3F1aXJlIGFsbCBjb21wb25lbnRzIGFuZCBrZWVwIHRoZW0gaW4gb3JkZXIgd2hpbGUgaGFuZGxpbmcgdGhlaXIgcG90ZW50aWFsIGFzeW5jLW5lc3NcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChcclxuICAgICAgY29tcG9uZW50cy5tYXAoKGNvbXBvbmVudCkgPT5cclxuICAgICAgICBpc1Jhd1JlbmRlcmluZyhjb21wb25lbnQpID8gdGhpcy5nZXRSYXdDb21wb25lbnQoY29tcG9uZW50KSA6IHRoaXMuZ2V0Q29tcG9uZW50KGNvbXBvbmVudClcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0UmF3Q29tcG9uZW50KGNvbXBvbmVudDogSHRtbEVsZW1lbnRSZW5kZXJpbmcpOiBQcm9taXNlPENvbXBvbmVudEZhY3RvcnlSZXN1bHQ+IHtcclxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xyXG4gICAgICBjb21wb25lbnRJbXBsZW1lbnRhdGlvbjogUmF3Q29tcG9uZW50LFxyXG4gICAgICBjb21wb25lbnREZWZpbml0aW9uOiBjb21wb25lbnQsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXBwbHlTWEFQYXJhbXMocmVuZGVyaW5nOiBDb21wb25lbnRSZW5kZXJpbmcpIHtcclxuICAgIC8vIFByb3ZpZGUgYWdncmVnYXRlZCBTWEEgc3R5bGVzIG9uIHBhcmFtcyAnc3R5bGVzJ1xyXG4gICAgY29uc3Qgc3R5bGVzID0gW107XHJcbiAgICBpZiAocmVuZGVyaW5nLnBhcmFtcz8uR3JpZFBhcmFtZXRlcnMpIHtcclxuICAgICAgc3R5bGVzLnB1c2gocmVuZGVyaW5nLnBhcmFtcy5HcmlkUGFyYW1ldGVycy50cmltKCkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlbmRlcmluZy5wYXJhbXM/LlN0eWxlcykge1xyXG4gICAgICBzdHlsZXMucHVzaChyZW5kZXJpbmcucGFyYW1zLlN0eWxlcy50cmltKCkpO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlbmRlcmluZy5wYXJhbXMgJiYgc3R5bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgcmVuZGVyaW5nLnBhcmFtcy5zdHlsZXMgPSBzdHlsZXMuam9pbignICcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlbmRlcmluZztcclxuICB9XHJcbn1cclxuIl19","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}