{"ast":null,"code":"import _asyncToGenerator from \"D:/JSS-APP/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// © Sitecore Corporation A/S. All rights reserved. Sitecore® is a registered trademark of Sitecore Corporation A/S.\nimport { getEnabledPackage, initCoreState } from './initializer';\nexport class PackageInitializer {\n  /* eslint-enable @typescript-eslint/naming-convention */\n  constructor(packageContext) {\n    /* eslint-disable @typescript-eslint/naming-convention */\n    this._initState = null;\n    this._sideEffects = packageContext.sideEffects;\n    this._settings = packageContext.settings;\n    this._dependencies = packageContext.dependencies ?? [];\n  }\n  validatePackages() {\n    const validatedPackages = [];\n    this._dependencies.forEach(dependency => {\n      // The package name is the name found in each package's package.json file e.g. @sitecore-cloudsdk/core\"\n      const depName = dependency.name.split('/')[1];\n      const pkg = getEnabledPackage(dependency.name);\n      if (!pkg) throw new Error(\n      // eslint-disable-next-line max-len\n      `[IE-0020] - This functionality also requires the \"${depName}\" package. Import \"${dependency.name}/browser\", then run \".${dependency.method}()\" on \"CloudSDK\", before \".initialize()\"`);\n      validatedPackages.push(pkg);\n    });\n    return validatedPackages;\n  }\n  exec() {\n    const validatedPackages = this.validatePackages();\n    this._initState = this.wrapSideEffects(validatedPackages);\n  }\n  wrapSideEffects(validatedPackages) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield initCoreState;\n      yield Promise.all(validatedPackages.map(pkg => pkg.initState));\n      _this._sideEffects();\n    })();\n  }\n  get initState() {\n    return this._initState;\n  }\n  get settings() {\n    return this._settings;\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}