{"ast":null,"code":"import _asyncToGenerator from \"D:/JSS-APP/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// © Sitecore Corporation A/S. All rights reserved. Sitecore® is a registered trademark of Sitecore Corporation A/S.\nimport { EVENTS_NAMESPACE, ErrorMessages, PACKAGE_NAME, PACKAGE_VERSION } from '../../consts';\nimport { debug, getBrowserId, getEnabledPackageBrowser as getEnabledPackage, initCore } from '@sitecore-cloudsdk/core/internal';\nexport let initPromise = null;\n/* eslint-disable max-len */\n/**\n * Initiates the Events library using the global settings added by the developer\n * @param settings - Global settings added by the developer\n * @returns A promise that resolves with an object that handles the library functionality\n * @deprecated Cloud SDK v0.4 introduces new initialization logic. If you are upgrading from v0.3, we recommend that you upgrade your initialization code. The v0.3 initialization logic will be deprecated and removed in a future Cloud SDK release.\n */\n/* eslint-enable max-len */\nexport function init(_x) {\n  return _init.apply(this, arguments);\n}\n/**\n * A function that handles the async browser init logic. Throws an error or awaits the promise.\n */\nfunction _init() {\n  _init = _asyncToGenerator(function* (settings) {\n    if (typeof window === 'undefined') throw new Error(ErrorMessages.IE_0001);\n    try {\n      initPromise = initCore(settings);\n      yield initPromise;\n      debug(EVENTS_NAMESPACE)('eventsClient library initialized');\n    } catch (error) {\n      debug(EVENTS_NAMESPACE)('Error on initializing eventsClient library: %o', error);\n      initPromise = null;\n      throw new Error(error);\n    }\n    window.Engage = {\n      ...window.Engage,\n      getBrowserId: () => getBrowserId(),\n      versions: {\n        ...window.Engage?.versions,\n        events: PACKAGE_VERSION\n      }\n    };\n  });\n  return _init.apply(this, arguments);\n}\nexport function awaitInit() {\n  return _awaitInit.apply(this, arguments);\n}\nfunction _awaitInit() {\n  _awaitInit = _asyncToGenerator(function* () {\n    const initState = getEnabledPackage(PACKAGE_NAME)?.initState;\n    if (initPromise === null && !initState) throw new Error(ErrorMessages.IE_0014);\n    initPromise ? yield initPromise : yield initState;\n  });\n  return _awaitInit.apply(this, arguments);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}