{"ast":null,"code":"import { Directive } from '@angular/core';\nimport { isFieldValueEmpty } from '@sitecore-jss/sitecore-jss/layout';\nimport { FieldMetadataMarkerComponent } from './field-metadata-marker.component';\nimport { MetadataKind } from '@sitecore-jss/sitecore-jss/editing';\nimport * as i0 from \"@angular/core\";\n/**\n * Base class that contains common functionality for the field directives.\n */\nexport let BaseFieldDirective = /*#__PURE__*/(() => {\n  class BaseFieldDirective {\n    viewContainer;\n    viewRef;\n    constructor(viewContainer) {\n      this.viewContainer = viewContainer;\n    }\n    /**\n     * Determines if directive should render the field as is\n     * Returns true if we are in edit mode 'chromes' (field.editable is present) or field is not empty\n     */\n    shouldRender() {\n      return !!this.field?.editable || !isFieldValueEmpty(this.field);\n    }\n    /**\n     * Renders the empty field markup which is required by Pages in editMode 'metadata' in case field is empty.\n     */\n    renderEmpty() {\n      if (this.field?.metadata && this.editable) {\n        this.renderMetadata(MetadataKind.Open);\n        if (this.emptyFieldEditingTemplate) {\n          this.viewContainer.createEmbeddedView(this.emptyFieldEditingTemplate);\n        } else {\n          this.viewContainer.createComponent(this.defaultFieldEditingComponent);\n        }\n        this.renderMetadata(MetadataKind.Close);\n      }\n    }\n    /**\n     * Renders a metadata chrome marker for the field. Required by Pages in editMode 'metadata'.\n     * @param {string} kind - 'open' or 'close' to indicate the start or end of the metadata chrome\n     */\n    renderMetadata(kind) {\n      if (this.field?.metadata && this.editable) {\n        const metadataChrome = this.viewContainer.createComponent(FieldMetadataMarkerComponent);\n        metadataChrome.setInput('kind', kind);\n        if (kind === MetadataKind.Open) {\n          metadataChrome.setInput('metadata', this.field.metadata);\n        }\n      }\n    }\n    static ɵfac = function BaseFieldDirective_Factory(t) {\n      return new (t || BaseFieldDirective)(i0.ɵɵdirectiveInject(i0.ViewContainerRef));\n    };\n    static ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: BaseFieldDirective\n    });\n  }\n  return BaseFieldDirective;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS1maWVsZC5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9iYXNlLWZpZWxkLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUF3RCxNQUFNLGVBQWUsQ0FBQztBQUVoRyxPQUFPLEVBQXFCLGlCQUFpQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDekYsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFDakYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLG9DQUFvQyxDQUFDOztBQUVsRTs7R0FFRztBQUVILE1BQU0sT0FBZ0Isa0JBQWtCO0lBYWhCO0lBWlosT0FBTyxDQUEyQjtJQVk1QyxZQUFzQixhQUErQjtRQUEvQixrQkFBYSxHQUFiLGFBQWEsQ0FBa0I7SUFBRyxDQUFDO0lBRXpEOzs7T0FHRztJQUNPLFlBQVk7UUFDcEIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUVEOztPQUVHO0lBQ08sV0FBVztRQUNuQixJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUMxQyxJQUFJLENBQUMsY0FBYyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2QyxJQUFJLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO2dCQUNuQyxJQUFJLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO1lBQ3hFLENBQUM7aUJBQU0sQ0FBQztnQkFDTixJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUN4RSxDQUFDO1lBQ0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDMUMsQ0FBQztJQUNILENBQUM7SUFFRDs7O09BR0c7SUFDTyxjQUFjLENBQUMsSUFBa0I7UUFDekMsSUFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDMUMsTUFBTSxjQUFjLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUN4RixjQUFjLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN0QyxJQUFJLElBQUksS0FBSyxZQUFZLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQy9CLGNBQWMsQ0FBQyxRQUFRLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDM0QsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO3dHQWxEbUIsa0JBQWtCOzRGQUFsQixrQkFBa0I7OzRGQUFsQixrQkFBa0I7a0JBRHZDLFNBQVMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIFR5cGUsIFZpZXdDb250YWluZXJSZWYsIEVtYmVkZGVkVmlld1JlZiwgVGVtcGxhdGVSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUmVuZGVyaW5nRmllbGQgfSBmcm9tICcuL3JlbmRlcmluZy1maWVsZCc7XHJcbmltcG9ydCB7IEdlbmVyaWNGaWVsZFZhbHVlLCBpc0ZpZWxkVmFsdWVFbXB0eSB9IGZyb20gJ0BzaXRlY29yZS1qc3Mvc2l0ZWNvcmUtanNzL2xheW91dCc7XHJcbmltcG9ydCB7IEZpZWxkTWV0YWRhdGFNYXJrZXJDb21wb25lbnQgfSBmcm9tICcuL2ZpZWxkLW1ldGFkYXRhLW1hcmtlci5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBNZXRhZGF0YUtpbmQgfSBmcm9tICdAc2l0ZWNvcmUtanNzL3NpdGVjb3JlLWpzcy9lZGl0aW5nJztcclxuXHJcbi8qKlxyXG4gKiBCYXNlIGNsYXNzIHRoYXQgY29udGFpbnMgY29tbW9uIGZ1bmN0aW9uYWxpdHkgZm9yIHRoZSBmaWVsZCBkaXJlY3RpdmVzLlxyXG4gKi9cclxuQERpcmVjdGl2ZSgpXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlRmllbGREaXJlY3RpdmUge1xyXG4gIHByb3RlY3RlZCB2aWV3UmVmOiBFbWJlZGRlZFZpZXdSZWY8dW5rbm93bj47XHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGZpZWxkOiBSZW5kZXJpbmdGaWVsZDxHZW5lcmljRmllbGRWYWx1ZT47XHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGVkaXRhYmxlOiBib29sZWFuO1xyXG4gIC8qKlxyXG4gICAqIEN1c3RvbSB0ZW1wbGF0ZSB0byByZW5kZXIgaW4gUGFnZXMgaW4gTWV0YWRhdGEgZWRpdCBtb2RlIGlmIGZpZWxkIHZhbHVlIGlzIGVtcHR5XHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGVtcHR5RmllbGRFZGl0aW5nVGVtcGxhdGU6IFRlbXBsYXRlUmVmPHVua25vd24+O1xyXG4gIC8qKlxyXG4gICAqIERlZmF1bHQgY29tcG9uZW50IHRvIHJlbmRlciBpbiBQYWdlcyBpbiBNZXRhZGF0YSBlZGl0IG1vZGUgaWYgZmllbGQgdmFsdWUgaXMgZW1wdHkgYW5kIGVtcHR5RmllbGRFZGl0aW5nVGVtcGxhdGUgaXMgbm90IHByb3ZpZGVkXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IGRlZmF1bHRGaWVsZEVkaXRpbmdDb21wb25lbnQ6IFR5cGU8dW5rbm93bj47XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCB2aWV3Q29udGFpbmVyOiBWaWV3Q29udGFpbmVyUmVmKSB7fVxyXG5cclxuICAvKipcclxuICAgKiBEZXRlcm1pbmVzIGlmIGRpcmVjdGl2ZSBzaG91bGQgcmVuZGVyIHRoZSBmaWVsZCBhcyBpc1xyXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgaW4gZWRpdCBtb2RlICdjaHJvbWVzJyAoZmllbGQuZWRpdGFibGUgaXMgcHJlc2VudCkgb3IgZmllbGQgaXMgbm90IGVtcHR5XHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHNob3VsZFJlbmRlcigpIHtcclxuICAgIHJldHVybiAhIXRoaXMuZmllbGQ/LmVkaXRhYmxlIHx8ICFpc0ZpZWxkVmFsdWVFbXB0eSh0aGlzLmZpZWxkKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbmRlcnMgdGhlIGVtcHR5IGZpZWxkIG1hcmt1cCB3aGljaCBpcyByZXF1aXJlZCBieSBQYWdlcyBpbiBlZGl0TW9kZSAnbWV0YWRhdGEnIGluIGNhc2UgZmllbGQgaXMgZW1wdHkuXHJcbiAgICovXHJcbiAgcHJvdGVjdGVkIHJlbmRlckVtcHR5KCkge1xyXG4gICAgaWYgKHRoaXMuZmllbGQ/Lm1ldGFkYXRhICYmIHRoaXMuZWRpdGFibGUpIHtcclxuICAgICAgdGhpcy5yZW5kZXJNZXRhZGF0YShNZXRhZGF0YUtpbmQuT3Blbik7XHJcbiAgICAgIGlmICh0aGlzLmVtcHR5RmllbGRFZGl0aW5nVGVtcGxhdGUpIHtcclxuICAgICAgICB0aGlzLnZpZXdDb250YWluZXIuY3JlYXRlRW1iZWRkZWRWaWV3KHRoaXMuZW1wdHlGaWVsZEVkaXRpbmdUZW1wbGF0ZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy52aWV3Q29udGFpbmVyLmNyZWF0ZUNvbXBvbmVudCh0aGlzLmRlZmF1bHRGaWVsZEVkaXRpbmdDb21wb25lbnQpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMucmVuZGVyTWV0YWRhdGEoTWV0YWRhdGFLaW5kLkNsb3NlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJlbmRlcnMgYSBtZXRhZGF0YSBjaHJvbWUgbWFya2VyIGZvciB0aGUgZmllbGQuIFJlcXVpcmVkIGJ5IFBhZ2VzIGluIGVkaXRNb2RlICdtZXRhZGF0YScuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtpbmQgLSAnb3Blbicgb3IgJ2Nsb3NlJyB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb3IgZW5kIG9mIHRoZSBtZXRhZGF0YSBjaHJvbWVcclxuICAgKi9cclxuICBwcm90ZWN0ZWQgcmVuZGVyTWV0YWRhdGEoa2luZDogTWV0YWRhdGFLaW5kKSB7XHJcbiAgICBpZiAodGhpcy5maWVsZD8ubWV0YWRhdGEgJiYgdGhpcy5lZGl0YWJsZSkge1xyXG4gICAgICBjb25zdCBtZXRhZGF0YUNocm9tZSA9IHRoaXMudmlld0NvbnRhaW5lci5jcmVhdGVDb21wb25lbnQoRmllbGRNZXRhZGF0YU1hcmtlckNvbXBvbmVudCk7XHJcbiAgICAgIG1ldGFkYXRhQ2hyb21lLnNldElucHV0KCdraW5kJywga2luZCk7XHJcbiAgICAgIGlmIChraW5kID09PSBNZXRhZGF0YUtpbmQuT3Blbikge1xyXG4gICAgICAgIG1ldGFkYXRhQ2hyb21lLnNldElucHV0KCdtZXRhZGF0YScsIHRoaXMuZmllbGQubWV0YWRhdGEpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}