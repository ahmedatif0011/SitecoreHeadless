{"ast":null,"code":"import _asyncToGenerator from \"D:/JSS-APP/angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n/* eslint-disable @angular-eslint/no-conflicting-lifecycle */\nimport { isPlatformServer } from '@angular/common';\nimport { Component, ContentChild, EventEmitter, Inject, Input, Output, PLATFORM_ID, TemplateRef, ViewChild, ViewContainerRef } from '@angular/core';\nimport { UrlTree } from '@angular/router';\nimport { EditMode } from '@sitecore-jss/sitecore-jss/layout';\nimport { Observable } from 'rxjs';\nimport { takeWhile } from 'rxjs/operators';\nimport { JssCanActivateRedirectError } from '../services/jss-can-activate-error';\nimport { DATA_RESOLVER, GUARD_RESOLVER, PLACEHOLDER_HIDDEN_RENDERING_COMPONENT, PLACEHOLDER_MISSING_COMPONENT_COMPONENT } from '../services/placeholder.token';\nimport { constants } from '@sitecore-jss/sitecore-jss';\nimport { isDynamicPlaceholder, getDynamicPlaceholderPattern } from '@sitecore-jss/sitecore-jss/layout';\nimport { PlaceholderLoadingDirective } from './placeholder-loading.directive';\nimport { RenderEachDirective } from './render-each.directive';\nimport { RenderEmptyDirective } from './render-empty.directive';\nimport { isRawRendering } from './rendering';\nimport { MetadataKind, DEFAULT_PLACEHOLDER_UID } from '@sitecore-jss/sitecore-jss/editing';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/jss-component-factory.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../services/jss-state.service\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = [\"view\"];\nconst _c1 = [\"metadataCodeBlock\"];\nconst _c2 = () => ({\n  kind: \"open\",\n  chromeType: \"placeholder\"\n});\nconst _c3 = () => ({\n  kind: \"close\",\n  chromeType: \"placeholder\"\n});\nfunction PlaceholderComponent_0_ng_template_0_Template(rf, ctx) {}\nfunction PlaceholderComponent_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, PlaceholderComponent_0_ng_template_0_Template, 0, 0, \"ng-template\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r0.placeholderLoading == null ? null : ctx_r0.placeholderLoading.templateRef);\n  }\n}\nfunction PlaceholderComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"code\", 5);\n  }\n  if (rf & 2) {\n    const kind_r2 = ctx.kind;\n    const type_r3 = ctx.chromeType;\n    const renderingId_r4 = ctx.renderingId;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵattribute(\"kind\", kind_r2)(\"chrometype\", type_r3)(\"id\", ctx_r0.getCodeBlockId(kind_r2, renderingId_r4));\n  }\n}\nfunction PlaceholderComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction PlaceholderComponent_ng_template_4_Template(rf, ctx) {}\nfunction PlaceholderComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nexport let PlaceholderComponent = /*#__PURE__*/(() => {\n  class PlaceholderComponent {\n    differs;\n    componentFactory;\n    changeDetectorRef;\n    elementRef;\n    renderer;\n    router;\n    missingComponentComponent;\n    hiddenRenderingComponent;\n    guardResolver;\n    dataResolver;\n    platformId;\n    jssState;\n    name;\n    rendering;\n    renderings;\n    outputs;\n    clientOnly = false;\n    loaded = new EventEmitter();\n    failed = new EventEmitter();\n    renderEachTemplate;\n    renderEmptyTemplate;\n    placeholderLoading;\n    view;\n    metadataNode;\n    isLoading = true;\n    metadataMode;\n    chromeType;\n    _inputs;\n    _differ;\n    _componentInstances = [];\n    placeholderData;\n    destroyed = false;\n    parentStyleAttribute = '';\n    contextSubscription;\n    constructor(differs, componentFactory, changeDetectorRef, elementRef, renderer, router, missingComponentComponent, hiddenRenderingComponent, guardResolver, dataResolver, platformId, jssState) {\n      this.differs = differs;\n      this.componentFactory = componentFactory;\n      this.changeDetectorRef = changeDetectorRef;\n      this.elementRef = elementRef;\n      this.renderer = renderer;\n      this.router = router;\n      this.missingComponentComponent = missingComponentComponent;\n      this.hiddenRenderingComponent = hiddenRenderingComponent;\n      this.guardResolver = guardResolver;\n      this.dataResolver = dataResolver;\n      this.platformId = platformId;\n      this.jssState = jssState;\n      this.contextSubscription = this.jssState.state.subscribe(({\n        sitecore\n      }) => {\n        this.metadataMode = sitecore?.context.editMode === EditMode.Metadata;\n      });\n    }\n    set inputs(value) {\n      this._inputs = value;\n      if (!this._differ && value) {\n        this._differ = this.differs.find(value).create();\n      }\n    }\n    ngOnInit() {\n      this.chromeType = this.name ? 'placeholder' : 'rendering';\n      // just to ensure the element exists\n      const elem = this.elementRef.nativeElement;\n      if (elem) {\n        const attributes = elem.attributes;\n        for (let i = 0; i < attributes.length; i++) {\n          const attr = attributes.item(i);\n          if (attr && attr.name.indexOf('_ngcontent') !== -1) {\n            this.parentStyleAttribute = attr.name;\n          }\n        }\n      }\n      this.placeholderData = this.renderings || this.getPlaceholder() || [];\n    }\n    ngOnDestroy() {\n      this.destroyed = true;\n      this._componentInstances = [];\n      if (this.contextSubscription) {\n        this.contextSubscription.unsubscribe();\n      }\n    }\n    ngOnChanges(changes) {\n      this.chromeType = changes.name ? 'placeholder' : 'rendering';\n      if (changes.rendering || changes.renderings) {\n        this.placeholderData = this.renderings || this.getPlaceholder() || [];\n        this._render();\n      }\n    }\n    ngDoCheck() {\n      if (!this._differ || !this._inputs || this._componentInstances.length === 0) {\n        return;\n      }\n      const changes = this._differ.diff(this._inputs);\n      if (!changes) {\n        return;\n      }\n      const updates = {};\n      changes.forEachRemovedItem(change => updates[change.key] = null);\n      changes.forEachAddedItem(change => updates[change.key] = change.currentValue);\n      changes.forEachChangedItem(change => updates[change.key] = change.currentValue);\n      this._componentInstances.forEach(componentInstance => this._setComponentInputs(componentInstance, updates));\n    }\n    /**\n     * Gets id for Metadata code blocks, in specific format\n     * Metadata code blocks will wrap be added around placeholder content and each rendering component\n     * to allow for editing integration in Pages.\n     * @param {string} kind code block type (\"open\" or \"close\"). \"open\" is added before an element, and \"close\" added after one.\n     * @param {string?} renderingId rendering uid to apply as id to code block\n     * @returns {string} formatted id value for code HTML node\n     */\n    getCodeBlockId = (kind, renderingId) => {\n      if (this.rendering && kind === MetadataKind.Open) {\n        const placeholderName = this.name;\n        const id = renderingId || this.rendering?.uid;\n        if (!renderingId && placeholderName) {\n          let phId = '';\n          for (const placeholder of Object.keys(this.rendering.placeholders || [])) {\n            if (placeholderName === placeholder) {\n              phId = id ? `${placeholderName}_${id}` : `${placeholderName}_${DEFAULT_PLACEHOLDER_UID}`;\n              break;\n            }\n            // Check if the placeholder is a dynamic placeholder\n            if (isDynamicPlaceholder(placeholder)) {\n              const pattern = getDynamicPlaceholderPattern(placeholder);\n              // Check if the placeholder matches the dynamic placeholder pattern\n              if (pattern.test(placeholderName)) {\n                phId = id ? `${placeholder}_${id}` : `${placeholder}_${DEFAULT_PLACEHOLDER_UID}`;\n                break;\n              }\n            }\n          }\n          return phId;\n        } else {\n          return id;\n        }\n      }\n      return undefined;\n    };\n    /**\n     * Get renderings/components to be rendered for current placeholder name\n     * Can modify the inner placeholders collection to adjust to using SXA dynamic placeholders\n     * @returns {ComponentRendering<ComponentFields> | HtmlElementRendering[] | null} List of renderings to be rendered\n     */\n    getPlaceholder() {\n      let phName = this.name?.slice() || '';\n      /**\n       * Process (SXA) dynamic placeholders\n       * Find and replace the matching dynamic placeholder e.g 'nameOfContainer-{*}' with the requested e.g. 'nameOfContainer-1'.\n       * For Metadata EditMode, we need to keep the raw placeholder name in place.\n       */\n      this.rendering?.placeholders && Object.keys(this.rendering.placeholders).forEach(placeholder => {\n        const patternPlaceholder = isDynamicPlaceholder(placeholder) ? getDynamicPlaceholderPattern(placeholder) : null;\n        if (patternPlaceholder && patternPlaceholder.test(phName)) {\n          if (this.metadataMode) {\n            phName = placeholder;\n          } else {\n            this.rendering.placeholders[phName] = this.rendering.placeholders[placeholder];\n            delete this.rendering.placeholders[placeholder];\n          }\n        }\n      });\n      if (this.rendering && this.rendering.placeholders && Object.keys(this.rendering.placeholders).length > 0) {\n        return this.rendering.placeholders[phName];\n      }\n      return null;\n    }\n    _setComponentInputs(componentInstance, inputs) {\n      Object.entries(inputs).forEach(([input, inputValue]) => componentInstance[input] = inputValue);\n    }\n    _subscribeComponentOutputs(componentInstance, outputs) {\n      Object.keys(outputs).filter(output => componentInstance[output] && componentInstance[output] instanceof Observable).forEach(output => componentInstance[output].pipe(takeWhile(() => !this.destroyed)).subscribe(outputs[output]));\n    }\n    _render() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.clientOnly && isPlatformServer(_this.platformId)) {\n          return;\n        }\n        _this._componentInstances = [];\n        _this.view.clear();\n        if (!_this.rendering && !_this.renderings) {\n          return;\n        }\n        if (!_this.name && !_this.renderings) {\n          console.warn('Placeholder name was not specified, and explicit renderings array was not passed. Placeholder requires either name and rendering, or renderings.');\n          _this.isLoading = false;\n          return;\n        }\n        const placeholder = _this.placeholderData;\n        if (!placeholder) {\n          console.warn(`Placeholder '${_this.name}' was not found in the current rendering data`, JSON.stringify(_this.rendering, null, 2));\n          _this.isLoading = false;\n          return;\n        }\n        // if the placeholder is empty (contains only raw renderings), then we may need to use the empty template if it's defined\n        const placeholderIsEmpty = placeholder.every(rendering => isRawRendering(rendering));\n        if (_this.renderEmptyTemplate && placeholderIsEmpty) {\n          _this.view.createEmbeddedView(_this.renderEmptyTemplate.templateRef, {\n            renderings: placeholder\n          });\n          _this.isLoading = false;\n        } else {\n          const factories = yield _this.componentFactory.getComponents(placeholder);\n          try {\n            const nonGuarded = yield _this.guardResolver(factories);\n            const withData = yield _this.dataResolver(nonGuarded);\n            // not using index to ensure code blocks are rendered at correct positions\n            withData.forEach(rendering => {\n              _this.metadataMode && _this.view.createEmbeddedView(_this.metadataNode, {\n                kind: MetadataKind.Open,\n                chromeType: 'rendering',\n                renderingId: rendering.factory.componentDefinition?.uid\n              });\n              if (_this.renderEachTemplate && !isRawRendering(rendering.factory.componentDefinition)) {\n                _this._renderTemplatedComponent(rendering.factory.componentDefinition);\n              } else {\n                _this._renderEmbeddedComponent(rendering.factory, rendering.data);\n              }\n              _this.metadataMode && _this.view.createEmbeddedView(_this.metadataNode, {\n                kind: MetadataKind.Close,\n                chromeType: 'rendering',\n                renderingId: rendering.factory.componentDefinition?.uid\n              });\n            });\n            _this.isLoading = false;\n            _this.changeDetectorRef.markForCheck();\n            _this.loaded.emit(_this.name);\n          } catch (e) {\n            _this.isLoading = false;\n            if (e instanceof JssCanActivateRedirectError) {\n              const redirectValue = e.redirectValue;\n              if (redirectValue instanceof UrlTree) {\n                _this.router.navigateByUrl(redirectValue);\n              } else if (typeof redirectValue === 'string') {\n                _this.router.navigate([redirectValue]);\n              } else {\n                _this.router.navigate(redirectValue);\n              }\n            } else {\n              _this.failed.emit(e);\n              console.warn(`Placeholder '${_this.name}' was not able to render with the current rendering data and error`, JSON.stringify(_this.rendering, null, 2), e);\n              return;\n            }\n          }\n        }\n      })();\n    }\n    _renderTemplatedComponent(rendering) {\n      // the render-each template takes care of all component mapping etc\n      // generally using <sc-render-component> which is about like _renderEmbeddedComponent()\n      // as a separate component\n      this.view.createEmbeddedView(this.renderEachTemplate.templateRef, {\n        rendering\n      });\n    }\n    _renderEmbeddedComponent(rendering, data) {\n      if (rendering.componentDefinition.componentName === constants.HIDDEN_RENDERING_NAME) {\n        rendering.componentImplementation = this.hiddenRenderingComponent;\n      }\n      if (!rendering.componentImplementation) {\n        const componentName = rendering.componentDefinition.componentName;\n        console.error(`Placeholder ${this.name} contains unknown component ${componentName}.`, `Ensure component is mapped, like:\n        JssModule.withComponents([\n          { name: '${componentName}', type: ${componentName}Component }\n        ])`);\n        rendering.componentImplementation = this.missingComponentComponent;\n      }\n      // apply the parent style attribute _ngcontent\n      // work-around for https://github.com/angular/angular/issues/12215\n      const createdComponentRef = this.view.createComponent(rendering.componentImplementation, {\n        ngModuleRef: rendering.componentModuleRef\n      });\n      if (this.parentStyleAttribute) {\n        this.renderer.setAttribute(createdComponentRef.location.nativeElement, this.parentStyleAttribute, '');\n      }\n      const componentInstance = createdComponentRef.instance;\n      componentInstance.rendering = rendering.componentDefinition;\n      componentInstance.data = data;\n      if (this._inputs) {\n        this._setComponentInputs(componentInstance, this._inputs);\n      }\n      if (this.outputs) {\n        this._subscribeComponentOutputs(componentInstance, this.outputs);\n      }\n      this._componentInstances.push(componentInstance);\n    }\n    static ɵfac = function PlaceholderComponent_Factory(t) {\n      return new (t || PlaceholderComponent)(i0.ɵɵdirectiveInject(i0.KeyValueDiffers), i0.ɵɵdirectiveInject(i1.JssComponentFactoryService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(PLACEHOLDER_MISSING_COMPONENT_COMPONENT), i0.ɵɵdirectiveInject(PLACEHOLDER_HIDDEN_RENDERING_COMPONENT), i0.ɵɵdirectiveInject(GUARD_RESOLVER), i0.ɵɵdirectiveInject(DATA_RESOLVER), i0.ɵɵdirectiveInject(PLATFORM_ID), i0.ɵɵdirectiveInject(i3.JssStateService));\n    };\n    static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n      type: PlaceholderComponent,\n      selectors: [[\"sc-placeholder\"], [\"\", \"sc-placeholder\", \"\"]],\n      contentQueries: function PlaceholderComponent_ContentQueries(rf, ctx, dirIndex) {\n        if (rf & 1) {\n          i0.ɵɵcontentQuery(dirIndex, RenderEachDirective, 7);\n          i0.ɵɵcontentQuery(dirIndex, RenderEmptyDirective, 7);\n          i0.ɵɵcontentQuery(dirIndex, PlaceholderLoadingDirective, 7);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.renderEachTemplate = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.renderEmptyTemplate = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.placeholderLoading = _t.first);\n        }\n      },\n      viewQuery: function PlaceholderComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 7, ViewContainerRef);\n          i0.ɵɵviewQuery(_c1, 5, TemplateRef);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.view = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.metadataNode = _t.first);\n        }\n      },\n      inputs: {\n        name: \"name\",\n        rendering: \"rendering\",\n        renderings: \"renderings\",\n        outputs: \"outputs\",\n        clientOnly: \"clientOnly\",\n        inputs: \"inputs\"\n      },\n      outputs: {\n        loaded: \"loaded\",\n        failed: \"failed\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 7,\n      vars: 7,\n      consts: [[\"metadataCodeBlock\", \"\"], [\"view\", \"\"], [4, \"ngIf\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [3, \"ngTemplateOutlet\"], [\"type\", \"text/sitecore\", 1, \"scpm\"]],\n      template: function PlaceholderComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, PlaceholderComponent_0_Template, 1, 1, null, 2)(1, PlaceholderComponent_ng_template_1_Template, 1, 3, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor)(3, PlaceholderComponent_ng_container_3_Template, 1, 0, \"ng-container\", 3)(4, PlaceholderComponent_ng_template_4_Template, 0, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor)(6, PlaceholderComponent_ng_container_6_Template, 1, 0, \"ng-container\", 3);\n        }\n        if (rf & 2) {\n          const metadataCodeBlock_r5 = i0.ɵɵreference(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngTemplateOutlet\", ctx.metadataMode && metadataCodeBlock_r5)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction0(5, _c2));\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngTemplateOutlet\", ctx.metadataMode && metadataCodeBlock_r5)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction0(6, _c3));\n        }\n      },\n      dependencies: [i4.NgIf, i4.NgTemplateOutlet],\n      encapsulation: 2\n    });\n  }\n  return PlaceholderComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGxhY2Vob2xkZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvcGxhY2Vob2xkZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDZEQUE2RDtBQUM3RCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNuRCxPQUFPLEVBRUwsU0FBUyxFQUNULFlBQVksRUFHWixZQUFZLEVBQ1osTUFBTSxFQUNOLEtBQUssRUFNTCxNQUFNLEVBQ04sV0FBVyxFQUdYLFdBQVcsRUFFWCxTQUFTLEVBQ1QsZ0JBQWdCLEdBQ2pCLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBZ0IsT0FBTyxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDeEQsT0FBTyxFQUdMLFFBQVEsR0FFVCxNQUFNLG1DQUFtQyxDQUFDO0FBQzNDLE9BQU8sRUFBRSxVQUFVLEVBQWdCLE1BQU0sTUFBTSxDQUFDO0FBQ2hELE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUtqRixPQUFPLEVBRUwsYUFBYSxFQUViLGNBQWMsRUFDZCxzQ0FBc0MsRUFDdEMsdUNBQXVDLEdBQ3hDLE1BQU0sK0JBQStCLENBQUM7QUFDdkMsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3ZELE9BQU8sRUFDTCxvQkFBb0IsRUFDcEIsNEJBQTRCLEdBQzdCLE1BQU0sbUNBQW1DLENBQUM7QUFDM0MsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDOUUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDOUQsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDaEUsT0FBTyxFQUFFLGNBQWMsRUFBRSxN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c0JBQXhFLFlBQVk7dUJBQUMsb0JBQW9CLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUVwRCxrQkFBa0I7c0JBRGpCLFlBQVk7dUJBQUMsMkJBQTJCLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2dCQUVVLElBQUk7c0JBQXhFLFNBQVM7dUJBQUMsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLGdCQUFnQixFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7Z0JBQ0ksWUFBWTtzQkFBMUUsU0FBUzt1QkFBQyxtQkFBbUIsRUFBRSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7Z0JBaUNqRCxNQUFNO3NCQURULEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAYW5ndWxhci1lc2xpbnQvbm8tY29uZmxpY3RpbmctbGlmZWN5Y2xlICovXHJcbmltcG9ydCB7IGlzUGxhdGZvcm1TZXJ2ZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge1xyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBDb250ZW50Q2hpbGQsXHJcbiAgRG9DaGVjayxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbmplY3QsXHJcbiAgSW5wdXQsXHJcbiAgS2V5VmFsdWVEaWZmZXIsXHJcbiAgS2V5VmFsdWVEaWZmZXJzLFxyXG4gIE9uQ2hhbmdlcyxcclxuICBPbkRlc3Ryb3ksXHJcbiAgT25Jbml0LFxyXG4gIE91dHB1dCxcclxuICBQTEFURk9STV9JRCxcclxuICBSZW5kZXJlcjIsXHJcbiAgU2ltcGxlQ2hhbmdlcyxcclxuICBUZW1wbGF0ZVJlZixcclxuICBUeXBlLFxyXG4gIFZpZXdDaGlsZCxcclxuICBWaWV3Q29udGFpbmVyUmVmLFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEYXRhLCBSb3V0ZXIsIFVybFRyZWUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQge1xyXG4gIENvbXBvbmVudFJlbmRlcmluZyxcclxuICBIdG1sRWxlbWVudFJlbmRlcmluZyxcclxuICBFZGl0TW9kZSxcclxuICBDb21wb25lbnRGaWVsZHMsXHJcbn0gZnJvbSAnQHNpdGVjb3JlLWpzcy9zaXRlY29yZS1qc3MvbGF5b3V0JztcclxuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IHRha2VXaGlsZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuaW1wb3J0IHsgSnNzQ2FuQWN0aXZhdGVSZWRpcmVjdEVycm9yIH0gZnJvbSAnLi4vc2VydmljZXMvanNzLWNhbi1hY3RpdmF0ZS1lcnJvcic7XHJcbmltcG9ydCB7XHJcbiAgQ29tcG9uZW50RmFjdG9yeVJlc3VsdCxcclxuICBKc3NDb21wb25lbnRGYWN0b3J5U2VydmljZSxcclxufSBmcm9tICcuLi9zZXJ2aWNlcy9qc3MtY29tcG9uZW50LWZhY3Rvcnkuc2VydmljZSc7XHJcbmltcG9ydCB7XHJcbiAgRGF0YVJlc29sdmVyLFxyXG4gIERBVEFfUkVTT0xWRVIsXHJcbiAgR3VhcmRSZXNvbHZlcixcclxuICBHVUFSRF9SRVNPTFZFUixcclxuICBQTEFDRUhPTERFUl9ISURERU5fUkVOREVSSU5HX0NPTVBPTkVOVCxcclxuICBQTEFDRUhPTERFUl9NSVNTSU5HX0NPTVBPTkVOVF9DT01QT05FTlQsXHJcbn0gZnJvbSAnLi4vc2VydmljZXMvcGxhY2Vob2xkZXIudG9rZW4nO1xyXG5pbXBvcnQgeyBjb25zdGFudHMgfSBmcm9tICdAc2l0ZWNvcmUtanNzL3NpdGVjb3JlLWpzcyc7XHJcbmltcG9ydCB7XHJcbiAgaXNEeW5hbWljUGxhY2Vob2xkZXIsXHJcbiAgZ2V0RHluYW1pY1BsYWNlaG9sZGVyUGF0dGVybixcclxufSBmcm9tICdAc2l0ZWNvcmUtanNzL3NpdGVjb3JlLWpzcy9sYXlvdXQnO1xyXG5pbXBvcnQgeyBQbGFjZWhvbGRlckxvYWRpbmdEaXJlY3RpdmUgfSBmcm9tICcuL3BsYWNlaG9sZGVyLWxvYWRpbmcuZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgUmVuZGVyRWFjaERpcmVjdGl2ZSB9IGZyb20gJy4vcmVuZGVyLWVhY2guZGlyZWN0aXZlJztcclxuaW1wb3J0IHsgUmVuZGVyRW1wdHlEaXJlY3RpdmUgfSBmcm9tICcuL3JlbmRlci1lbXB0eS5kaXJlY3RpdmUnO1xyXG5pbXBvcnQgeyBpc1Jhd1JlbmRlcmluZyB9IGZyb20gJy4vcmVuZGVyaW5nJztcclxuaW1wb3J0IHsgSnNzU3RhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvanNzLXN0YXRlLnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBNZXRhZGF0YUtpbmQsIERFRkFVTFRfUExBQ0VIT0xERVJfVUlEIH0gZnJvbSAnQHNpdGVjb3JlLWpzcy9zaXRlY29yZS1qc3MvZWRpdGluZyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZhY3RvcnlXaXRoRGF0YSB7XHJcbiAgZmFjdG9yeTogQ29tcG9uZW50RmFjdG9yeVJlc3VsdDtcclxuICBkYXRhPzogRGF0YTtcclxufVxyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdzYy1wbGFjZWhvbGRlcixbc2MtcGxhY2Vob2xkZXJdJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPG5nLXRlbXBsYXRlXHJcbiAgICAgICpuZ0lmPVwiaXNMb2FkaW5nXCJcclxuICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwicGxhY2Vob2xkZXJMb2FkaW5nPy50ZW1wbGF0ZVJlZlwiXHJcbiAgICA+PC9uZy10ZW1wbGF0ZT5cclxuICAgIDxuZy10ZW1wbGF0ZVxyXG4gICAgICAjbWV0YWRhdGFDb2RlQmxvY2tcclxuICAgICAgbGV0LWtpbmQ9XCJraW5kXCJcclxuICAgICAgbGV0LXR5cGU9XCJjaHJvbWVUeXBlXCJcclxuICAgICAgbGV0LXJlbmRlcmluZ0lkPVwicmVuZGVyaW5nSWRcIlxyXG4gICAgPlxyXG4gICAgICA8Y29kZVxyXG4gICAgICAgIFthdHRyLmtpbmRdPVwia2luZFwiXHJcbiAgICAgICAgdHlwZT1cInRleHQvc2l0ZWNvcmVcIlxyXG4gICAgICAgIFthdHRyLmNocm9tZXR5cGVdPVwidHlwZVwiXHJcbiAgICAgICAgY2xhc3M9XCJzY3BtXCJcclxuICAgICAgICBbYXR0ci5pZF09XCJnZXRDb2RlQmxvY2tJZChraW5kLCByZW5kZXJpbmdJZClcIlxyXG4gICAgICA+PC9jb2RlXHJcbiAgICA+PC9uZy10ZW1wbGF0ZT5cclxuXHJcbiAgICA8bmctY29udGFpbmVyXHJcbiAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXHJcbiAgICAgICAgbWV0YWRhdGFNb2RlICYmIG1ldGFkYXRhQ29kZUJsb2NrO1xyXG4gICAgICAgIGNvbnRleHQ6IHsga2luZDogJ29wZW4nLCBjaHJvbWVUeXBlOiAncGxhY2Vob2xkZXInIH1cclxuICAgICAgXCJcclxuICAgID5cclxuICAgIDwvbmctY29udGFpbmVyPlxyXG5cclxuICAgIDxuZy10ZW1wbGF0ZSAjdmlldz48L25nLXRlbXBsYXRlPlxyXG5cclxuICAgIDxuZy1jb250YWluZXJcclxuICAgICAgKm5nVGVtcGxhdGVPdXRsZXQ9XCJcclxuICAgICAgICBtZXRhZGF0YU1vZGUgJiYgbWV0YWRhdGFDb2RlQmxvY2s7XHJcbiAgICAgICAgY29udGV4dDogeyBraW5kOiAnY2xvc2UnLCBjaHJvbWVUeXBlOiAncGxhY2Vob2xkZXInIH1cclxuICAgICAgXCJcclxuICAgID5cclxuICAgIDwvbmctY29udGFpbmVyPlxyXG4gIGAsXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBQbGFjZWhvbGRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzLCBEb0NoZWNrLCBPbkRlc3Ryb3kge1xyXG4gIEBJbnB1dCgpIG5hbWU/OiBzdHJpbmc7XHJcbiAgQElucHV0KCkgcmVuZGVyaW5nOiBDb21wb25lbnRSZW5kZXJpbmc7XHJcbiAgQElucHV0KCkgcmVuZGVyaW5ncz86IEFycmF5PENvbXBvbmVudFJlbmRlcmluZyB8IEh0bWxFbGVtZW50UmVuZGVyaW5nPjtcclxuICBASW5wdXQoKSBvdXRwdXRzOiB7IFtrOiBzdHJpbmddOiAoZXZlbnRUeXBlOiB1bmtub3duKSA9PiB2b2lkIH07XHJcbiAgQElucHV0KCkgY2xpZW50T25seSA9IGZhbHNlO1xyXG5cclxuICBAT3V0cHV0KCkgbG9hZGVkID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmcgfCB1bmRlZmluZWQ+KCk7XHJcbiAgQE91dHB1dCgpIGZhaWxlZCA9IG5ldyBFdmVudEVtaXR0ZXI8RXJyb3I+KCk7XHJcbiAgQENvbnRlbnRDaGlsZChSZW5kZXJFYWNoRGlyZWN0aXZlLCB7IHN0YXRpYzogdHJ1ZSB9KSByZW5kZXJFYWNoVGVtcGxhdGU6IFJlbmRlckVhY2hEaXJlY3RpdmU7XHJcbiAgQENvbnRlbnRDaGlsZChSZW5kZXJFbXB0eURpcmVjdGl2ZSwgeyBzdGF0aWM6IHRydWUgfSkgcmVuZGVyRW1wdHlUZW1wbGF0ZTogUmVuZGVyRW1wdHlEaXJlY3RpdmU7XHJcbiAgQENvbnRlbnRDaGlsZChQbGFjZWhvbGRlckxvYWRpbmdEaXJlY3RpdmUsIHsgc3RhdGljOiB0cnVlIH0pXHJcbiAgcGxhY2Vob2xkZXJMb2FkaW5nPzogUGxhY2Vob2xkZXJMb2FkaW5nRGlyZWN0aXZlO1xyXG4gIEBWaWV3Q2hpbGQoJ3ZpZXcnLCB7IHJlYWQ6IFZpZXdDb250YWluZXJSZWYsIHN0YXRpYzogdHJ1ZSB9KSBwcml2YXRlIHZpZXc6IFZpZXdDb250YWluZXJSZWY7XHJcbiAgQFZpZXdDaGlsZCgnbWV0YWRhdGFDb2RlQmxvY2snLCB7IHJlYWQ6IFRlbXBsYXRlUmVmIH0pIHByaXZhdGUgbWV0YWRhdGFOb2RlOiBUZW1wbGF0ZVJlZjx1bmtub3duPjtcclxuICBwdWJsaWMgaXNMb2FkaW5nID0gdHJ1ZTtcclxuICBtZXRhZGF0YU1vZGU6IGJvb2xlYW47XHJcbiAgY2hyb21lVHlwZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2lucHV0czogeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH07XHJcbiAgcHJpdmF0ZSBfZGlmZmVyOiBLZXlWYWx1ZURpZmZlcjxzdHJpbmcsIHVua25vd24+O1xyXG4gIHByaXZhdGUgX2NvbXBvbmVudEluc3RhbmNlczogeyBbcHJvcDogc3RyaW5nXTogdW5rbm93biB9W10gPSBbXTtcclxuICBwcml2YXRlIHBsYWNlaG9sZGVyRGF0YT86IChDb21wb25lbnRSZW5kZXJpbmc8Q29tcG9uZW50RmllbGRzPiB8IEh0bWxFbGVtZW50UmVuZGVyaW5nKVtdO1xyXG4gIHByaXZhdGUgZGVzdHJveWVkID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBwYXJlbnRTdHlsZUF0dHJpYnV0ZSA9ICcnO1xyXG4gIHByaXZhdGUgY29udGV4dFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgZGlmZmVyczogS2V5VmFsdWVEaWZmZXJzLFxyXG4gICAgcHJpdmF0ZSBjb21wb25lbnRGYWN0b3J5OiBKc3NDb21wb25lbnRGYWN0b3J5U2VydmljZSxcclxuICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmLFxyXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxyXG4gICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcclxuICAgIEBJbmplY3QoUExBQ0VIT0xERVJfTUlTU0lOR19DT01QT05FTlRfQ09NUE9ORU5UKVxyXG4gICAgcHJpdmF0ZSBtaXNzaW5nQ29tcG9uZW50Q29tcG9uZW50OiBUeXBlPHVua25vd24+LFxyXG4gICAgQEluamVjdChQTEFDRUhPTERFUl9ISURERU5fUkVOREVSSU5HX0NPTVBPTkVOVCkgcHJpdmF0ZSBoaWRkZW5SZW5kZXJpbmdDb21wb25lbnQ6IFR5cGU8dW5rbm93bj4sXHJcbiAgICBASW5qZWN0KEdVQVJEX1JFU09MVkVSKSBwcml2YXRlIGd1YXJkUmVzb2x2ZXI6IEd1YXJkUmVzb2x2ZXIsXHJcbiAgICBASW5qZWN0KERBVEFfUkVTT0xWRVIpIHByaXZhdGUgZGF0YVJlc29sdmVyOiBEYXRhUmVzb2x2ZXIsXHJcbiAgICBASW5qZWN0KFBMQVRGT1JNX0lEKSBwcml2YXRlIHBsYXRmb3JtSWQ6IG9iamVjdCxcclxuICAgIHByaXZhdGUganNzU3RhdGU6IEpzc1N0YXRlU2VydmljZVxyXG4gICkge1xyXG4gICAgdGhpcy5jb250ZXh0U3Vic2NyaXB0aW9uID0gdGhpcy5qc3NTdGF0ZS5zdGF0ZS5zdWJzY3JpYmUoKHsgc2l0ZWNvcmUgfSkgPT4ge1xyXG4gICAgICB0aGlzLm1ldGFkYXRhTW9kZSA9IHNpdGVjb3JlPy5jb250ZXh0LmVkaXRNb2RlID09PSBFZGl0TW9kZS5NZXRhZGF0YTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgaW5wdXRzKHZhbHVlOiB7IFtrZXk6IHN0cmluZ106IHVua25vd24gfSkge1xyXG4gICAgdGhpcy5faW5wdXRzID0gdmFsdWU7XHJcbiAgICBpZiAoIXRoaXMuX2RpZmZlciAmJiB2YWx1ZSkge1xyXG4gICAgICB0aGlzLl9kaWZmZXIgPSB0aGlzLmRpZmZlcnMuZmluZCh2YWx1ZSkuY3JlYXRlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuY2hyb21lVHlwZSA9IHRoaXMubmFtZSA/ICdwbGFjZWhvbGRlcicgOiAncmVuZGVyaW5nJztcclxuICAgIC8vIGp1c3QgdG8gZW5zdXJlIHRoZSBlbGVtZW50IGV4aXN0c1xyXG4gICAgY29uc3QgZWxlbSA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG5cclxuICAgIGlmIChlbGVtKSB7XHJcbiAgICAgIGNvbnN0IGF0dHJpYnV0ZXM6IE5hbWVkTm9kZU1hcCA9IGVsZW0uYXR0cmlidXRlcztcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYXR0cjogQXR0ciB8IG51bGwgPSBhdHRyaWJ1dGVzLml0ZW0oaSk7XHJcbiAgICAgICAgaWYgKGF0dHIgJiYgYXR0ci5uYW1lLmluZGV4T2YoJ19uZ2NvbnRlbnQnKSAhPT0gLTEpIHtcclxuICAgICAgICAgIHRoaXMucGFyZW50U3R5bGVBdHRyaWJ1dGUgPSBhdHRyLm5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnBsYWNlaG9sZGVyRGF0YSA9IHRoaXMucmVuZGVyaW5ncyB8fCB0aGlzLmdldFBsYWNlaG9sZGVyKCkgfHwgW107XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcclxuICAgIHRoaXMuX2NvbXBvbmVudEluc3RhbmNlcyA9IFtdO1xyXG4gICAgaWYgKHRoaXMuY29udGV4dFN1YnNjcmlwdGlvbikge1xyXG4gICAgICB0aGlzLmNvbnRleHRTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIHRoaXMuY2hyb21lVHlwZSA9IGNoYW5nZXMubmFtZSA/ICdwbGFjZWhvbGRlcicgOiAncmVuZGVyaW5nJztcclxuICAgIGlmIChjaGFuZ2VzLnJlbmRlcmluZyB8fCBjaGFuZ2VzLnJlbmRlcmluZ3MpIHtcclxuICAgICAgdGhpcy5wbGFjZWhvbGRlckRhdGEgPSB0aGlzLnJlbmRlcmluZ3MgfHwgdGhpcy5nZXRQbGFjZWhvbGRlcigpIHx8IFtdO1xyXG4gICAgICB0aGlzLl9yZW5kZXIoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nRG9DaGVjaygpIHtcclxuICAgIGlmICghdGhpcy5fZGlmZmVyIHx8ICF0aGlzLl9pbnB1dHMgfHwgdGhpcy5fY29tcG9uZW50SW5zdGFuY2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuX2RpZmZlci5kaWZmKHRoaXMuX2lucHV0cyk7XHJcbiAgICBpZiAoIWNoYW5nZXMpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdXBkYXRlczogeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH0gPSB7fTtcclxuICAgIGNoYW5nZXMuZm9yRWFjaFJlbW92ZWRJdGVtKChjaGFuZ2UpID0+ICh1cGRhdGVzW2NoYW5nZS5rZXldID0gbnVsbCkpO1xyXG4gICAgY2hhbmdlcy5mb3JFYWNoQWRkZWRJdGVtKChjaGFuZ2UpID0+ICh1cGRhdGVzW2NoYW5nZS5rZXldID0gY2hhbmdlLmN1cnJlbnRWYWx1ZSkpO1xyXG4gICAgY2hhbmdlcy5mb3JFYWNoQ2hhbmdlZEl0ZW0oKGNoYW5nZSkgPT4gKHVwZGF0ZXNbY2hhbmdlLmtleV0gPSBjaGFuZ2UuY3VycmVudFZhbHVlKSk7XHJcbiAgICB0aGlzLl9jb21wb25lbnRJbnN0YW5jZXMuZm9yRWFjaCgoY29tcG9uZW50SW5zdGFuY2UpID0+XHJcbiAgICAgIHRoaXMuX3NldENvbXBvbmVudElucHV0cyhjb21wb25lbnRJbnN0YW5jZSwgdXBkYXRlcylcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGlkIGZvciBNZXRhZGF0YSBjb2RlIGJsb2NrcywgaW4gc3BlY2lmaWMgZm9ybWF0XHJcbiAgICogTWV0YWRhdGEgY29kZSBibG9ja3Mgd2lsbCB3cmFwIGJlIGFkZGVkIGFyb3VuZCBwbGFjZWhvbGRlciBjb250ZW50IGFuZCBlYWNoIHJlbmRlcmluZyBjb21wb25lbnRcclxuICAgKiB0byBhbGxvdyBmb3IgZWRpdGluZyBpbnRlZ3JhdGlvbiBpbiBQYWdlcy5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2luZCBjb2RlIGJsb2NrIHR5cGUgKFwib3BlblwiIG9yIFwiY2xvc2VcIikuIFwib3BlblwiIGlzIGFkZGVkIGJlZm9yZSBhbiBlbGVtZW50LCBhbmQgXCJjbG9zZVwiIGFkZGVkIGFmdGVyIG9uZS5cclxuICAgKiBAcGFyYW0ge3N0cmluZz99IHJlbmRlcmluZ0lkIHJlbmRlcmluZyB1aWQgdG8gYXBwbHkgYXMgaWQgdG8gY29kZSBibG9ja1xyXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGZvcm1hdHRlZCBpZCB2YWx1ZSBmb3IgY29kZSBIVE1MIG5vZGVcclxuICAgKi9cclxuICBnZXRDb2RlQmxvY2tJZCA9IChraW5kOiBzdHJpbmcsIHJlbmRlcmluZ0lkPzogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcclxuICAgIGlmICh0aGlzLnJlbmRlcmluZyAmJiBraW5kID09PSBNZXRhZGF0YUtpbmQuT3Blbikge1xyXG4gICAgICBjb25zdCBwbGFjZWhvbGRlck5hbWUgPSB0aGlzLm5hbWU7XHJcbiAgICAgIGNvbnN0IGlkID0gcmVuZGVyaW5nSWQgfHwgdGhpcy5yZW5kZXJpbmc/LnVpZDtcclxuICAgICAgaWYgKCFyZW5kZXJpbmdJZCAmJiBwbGFjZWhvbGRlck5hbWUpIHtcclxuICAgICAgICBsZXQgcGhJZCA9ICcnO1xyXG4gICAgICAgIGZvciAoY29uc3QgcGxhY2Vob2xkZXIgb2YgT2JqZWN0LmtleXModGhpcy5yZW5kZXJpbmcucGxhY2Vob2xkZXJzIHx8IFtdKSkge1xyXG4gICAgICAgICAgaWYgKHBsYWNlaG9sZGVyTmFtZSA9PT0gcGxhY2Vob2xkZXIpIHtcclxuICAgICAgICAgICAgcGhJZCA9IGlkXHJcbiAgICAgICAgICAgICAgPyBgJHtwbGFjZWhvbGRlck5hbWV9XyR7aWR9YFxyXG4gICAgICAgICAgICAgIDogYCR7cGxhY2Vob2xkZXJOYW1lfV8ke0RFRkFVTFRfUExBQ0VIT0xERVJfVUlEfWA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBsYWNlaG9sZGVyIGlzIGEgZHluYW1pYyBwbGFjZWhvbGRlclxyXG4gICAgICAgICAgaWYgKGlzRHluYW1pY1BsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKSkge1xyXG4gICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gZ2V0RHluYW1pY1BsYWNlaG9sZGVyUGF0dGVybihwbGFjZWhvbGRlcik7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwbGFjZWhvbGRlciBtYXRjaGVzIHRoZSBkeW5hbWljIHBsYWNlaG9sZGVyIHBhdHRlcm5cclxuICAgICAgICAgICAgaWYgKHBhdHRlcm4udGVzdChwbGFjZWhvbGRlck5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgcGhJZCA9IGlkID8gYCR7cGxhY2Vob2xkZXJ9XyR7aWR9YCA6IGAke3BsYWNlaG9sZGVyfV8ke0RFRkFVTFRfUExBQ0VIT0xERVJfVUlEfWA7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBoSWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGlkO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIEdldCByZW5kZXJpbmdzL2NvbXBvbmVudHMgdG8gYmUgcmVuZGVyZWQgZm9yIGN1cnJlbnQgcGxhY2Vob2xkZXIgbmFtZVxyXG4gICAqIENhbiBtb2RpZnkgdGhlIGlubmVyIHBsYWNlaG9sZGVycyBjb2xsZWN0aW9uIHRvIGFkanVzdCB0byB1c2luZyBTWEEgZHluYW1pYyBwbGFjZWhvbGRlcnNcclxuICAgKiBAcmV0dXJucyB7Q29tcG9uZW50UmVuZGVyaW5nPENvbXBvbmVudEZpZWxkcz4gfCBIdG1sRWxlbWVudFJlbmRlcmluZ1tdIHwgbnVsbH0gTGlzdCBvZiByZW5kZXJpbmdzIHRvIGJlIHJlbmRlcmVkXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRQbGFjZWhvbGRlcigpIHtcclxuICAgIGxldCBwaE5hbWUgPSB0aGlzLm5hbWU/LnNsaWNlKCkgfHwgJyc7XHJcbiAgICAvKipcclxuICAgICAqIFByb2Nlc3MgKFNYQSkgZHluYW1pYyBwbGFjZWhvbGRlcnNcclxuICAgICAqIEZpbmQgYW5kIHJlcGxhY2UgdGhlIG1hdGNoaW5nIGR5bmFtaWMgcGxhY2Vob2xkZXIgZS5nICduYW1lT2ZDb250YWluZXIteyp9JyB3aXRoIHRoZSByZXF1ZXN0ZWQgZS5nLiAnbmFtZU9mQ29udGFpbmVyLTEnLlxyXG4gICAgICogRm9yIE1ldGFkYXRhIEVkaXRNb2RlLCB3ZSBuZWVkIHRvIGtlZXAgdGhlIHJhdyBwbGFjZWhvbGRlciBuYW1lIGluIHBsYWNlLlxyXG4gICAgICovXHJcbiAgICB0aGlzLnJlbmRlcmluZz8ucGxhY2Vob2xkZXJzICYmXHJcbiAgICAgIE9iamVjdC5rZXlzKHRoaXMucmVuZGVyaW5nLnBsYWNlaG9sZGVycykuZm9yRWFjaCgocGxhY2Vob2xkZXIpID0+IHtcclxuICAgICAgICBjb25zdCBwYXR0ZXJuUGxhY2Vob2xkZXIgPSBpc0R5bmFtaWNQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcclxuICAgICAgICAgID8gZ2V0RHluYW1pY1BsYWNlaG9sZGVyUGF0dGVybihwbGFjZWhvbGRlcilcclxuICAgICAgICAgIDogbnVsbDtcclxuICAgICAgICBpZiAocGF0dGVyblBsYWNlaG9sZGVyICYmIHBhdHRlcm5QbGFjZWhvbGRlci50ZXN0KHBoTmFtZSkpIHtcclxuICAgICAgICAgIGlmICh0aGlzLm1ldGFkYXRhTW9kZSkge1xyXG4gICAgICAgICAgICBwaE5hbWUgPSBwbGFjZWhvbGRlcjtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyaW5nLnBsYWNlaG9sZGVycyFbcGhOYW1lXSA9IHRoaXMucmVuZGVyaW5nLnBsYWNlaG9sZGVycyFbcGxhY2Vob2xkZXJdO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5yZW5kZXJpbmcucGxhY2Vob2xkZXJzIVtwbGFjZWhvbGRlcl07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgIHRoaXMucmVuZGVyaW5nICYmXHJcbiAgICAgIHRoaXMucmVuZGVyaW5nLnBsYWNlaG9sZGVycyAmJlxyXG4gICAgICBPYmplY3Qua2V5cyh0aGlzLnJlbmRlcmluZy5wbGFjZWhvbGRlcnMpLmxlbmd0aCA+IDBcclxuICAgICkge1xyXG4gICAgICByZXR1cm4gdGhpcy5yZW5kZXJpbmcucGxhY2Vob2xkZXJzW3BoTmFtZV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX3NldENvbXBvbmVudElucHV0cyhcclxuICAgIGNvbXBvbmVudEluc3RhbmNlOiB7IFtrZXk6IHN0cmluZ106IHVua25vd24gfSxcclxuICAgIGlucHV0czogeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH1cclxuICApIHtcclxuICAgIE9iamVjdC5lbnRyaWVzKGlucHV0cykuZm9yRWFjaChcclxuICAgICAgKFtpbnB1dCwgaW5wdXRWYWx1ZV0pID0+IChjb21wb25lbnRJbnN0YW5jZVtpbnB1dF0gPSBpbnB1dFZhbHVlKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgX3N1YnNjcmliZUNvbXBvbmVudE91dHB1dHMoXHJcbiAgICBjb21wb25lbnRJbnN0YW5jZTogeyBba2V5OiBzdHJpbmddOiB1bmtub3duIH0sXHJcbiAgICBvdXRwdXRzOiB7IFtrOiBzdHJpbmddOiAoZXZlbnRUeXBlOiB1bmtub3duKSA9PiB2b2lkIH1cclxuICApIHtcclxuICAgIE9iamVjdC5rZXlzKG91dHB1dHMpXHJcbiAgICAgIC5maWx0ZXIoXHJcbiAgICAgICAgKG91dHB1dCkgPT4gY29tcG9uZW50SW5zdGFuY2Vbb3V0cHV0XSAmJiBjb21wb25lbnRJbnN0YW5jZVtvdXRwdXRdIGluc3RhbmNlb2YgT2JzZXJ2YWJsZVxyXG4gICAgICApXHJcbiAgICAgIC5mb3JFYWNoKChvdXRwdXQpID0+XHJcbiAgICAgICAgKGNvbXBvbmVudEluc3RhbmNlW291dHB1dF0gYXMgT2JzZXJ2YWJsZTx1bmtub3duPilcclxuICAgICAgICAgIC5waXBlKHRha2VXaGlsZSgoKSA9PiAhdGhpcy5kZXN0cm95ZWQpKVxyXG4gICAgICAgICAgLnN1YnNjcmliZShvdXRwdXRzW291dHB1dF0pXHJcbiAgICAgICk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIF9yZW5kZXIoKSB7XHJcbiAgICBpZiAodGhpcy5jbGllbnRPbmx5ICYmIGlzUGxhdGZvcm1TZXJ2ZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY29tcG9uZW50SW5zdGFuY2VzID0gW107XHJcbiAgICB0aGlzLnZpZXcuY2xlYXIoKTtcclxuXHJcbiAgICBpZiAoIXRoaXMucmVuZGVyaW5nICYmICF0aGlzLnJlbmRlcmluZ3MpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5uYW1lICYmICF0aGlzLnJlbmRlcmluZ3MpIHtcclxuICAgICAgY29uc29sZS53YXJuKFxyXG4gICAgICAgICdQbGFjZWhvbGRlciBuYW1lIHdhcyBub3Qgc3BlY2lmaWVkLCBhbmQgZXhwbGljaXQgcmVuZGVyaW5ncyBhcnJheSB3YXMgbm90IHBhc3NlZC4gUGxhY2Vob2xkZXIgcmVxdWlyZXMgZWl0aGVyIG5hbWUgYW5kIHJlbmRlcmluZywgb3IgcmVuZGVyaW5ncy4nXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXJEYXRhO1xyXG4gICAgaWYgKCFwbGFjZWhvbGRlcikge1xyXG4gICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgYFBsYWNlaG9sZGVyICcke3RoaXMubmFtZX0nIHdhcyBub3QgZm91bmQgaW4gdGhlIGN1cnJlbnQgcmVuZGVyaW5nIGRhdGFgLFxyXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMucmVuZGVyaW5nLCBudWxsLCAyKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaWYgdGhlIHBsYWNlaG9sZGVyIGlzIGVtcHR5IChjb250YWlucyBvbmx5IHJhdyByZW5kZXJpbmdzKSwgdGhlbiB3ZSBtYXkgbmVlZCB0byB1c2UgdGhlIGVtcHR5IHRlbXBsYXRlIGlmIGl0J3MgZGVmaW5lZFxyXG4gICAgY29uc3QgcGxhY2Vob2xkZXJJc0VtcHR5ID0gcGxhY2Vob2xkZXIuZXZlcnkoXHJcbiAgICAgIChyZW5kZXJpbmc6IENvbXBvbmVudFJlbmRlcmluZyB8IEh0bWxFbGVtZW50UmVuZGVyaW5nKSA9PiBpc1Jhd1JlbmRlcmluZyhyZW5kZXJpbmcpXHJcbiAgICApO1xyXG5cclxuICAgIGlmICh0aGlzLnJlbmRlckVtcHR5VGVtcGxhdGUgJiYgcGxhY2Vob2xkZXJJc0VtcHR5KSB7XHJcbiAgICAgIHRoaXMudmlldy5jcmVhdGVFbWJlZGRlZFZpZXcodGhpcy5yZW5kZXJFbXB0eVRlbXBsYXRlLnRlbXBsYXRlUmVmLCB7XHJcbiAgICAgICAgcmVuZGVyaW5nczogcGxhY2Vob2xkZXIsXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgZmFjdG9yaWVzID0gYXdhaXQgdGhpcy5jb21wb25lbnRGYWN0b3J5LmdldENvbXBvbmVudHMocGxhY2Vob2xkZXIpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG5vbkd1YXJkZWQgPSBhd2FpdCB0aGlzLmd1YXJkUmVzb2x2ZXIoZmFjdG9yaWVzKTtcclxuICAgICAgICBjb25zdCB3aXRoRGF0YSA9IGF3YWl0IHRoaXMuZGF0YVJlc29sdmVyKG5vbkd1YXJkZWQpO1xyXG4gICAgICAgIC8vIG5vdCB1c2luZyBpbmRleCB0byBlbnN1cmUgY29kZSBibG9ja3MgYXJlIHJlbmRlcmVkIGF0IGNvcnJlY3QgcG9zaXRpb25zXHJcbiAgICAgICAgd2l0aERhdGEuZm9yRWFjaCgocmVuZGVyaW5nKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLm1ldGFkYXRhTW9kZSAmJlxyXG4gICAgICAgICAgICB0aGlzLnZpZXcuY3JlYXRlRW1iZWRkZWRWaWV3KHRoaXMubWV0YWRhdGFOb2RlLCB7XHJcbiAgICAgICAgICAgICAga2luZDogTWV0YWRhdGFLaW5kLk9wZW4sXHJcbiAgICAgICAgICAgICAgY2hyb21lVHlwZTogJ3JlbmRlcmluZycsXHJcbiAgICAgICAgICAgICAgcmVuZGVyaW5nSWQ6IChyZW5kZXJpbmcuZmFjdG9yeS5jb21wb25lbnREZWZpbml0aW9uIGFzIENvbXBvbmVudFJlbmRlcmluZyk/LnVpZCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaWYgKHRoaXMucmVuZGVyRWFjaFRlbXBsYXRlICYmICFpc1Jhd1JlbmRlcmluZyhyZW5kZXJpbmcuZmFjdG9yeS5jb21wb25lbnREZWZpbml0aW9uKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJUZW1wbGF0ZWRDb21wb25lbnQocmVuZGVyaW5nLmZhY3RvcnkuY29tcG9uZW50RGVmaW5pdGlvbik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJFbWJlZGRlZENvbXBvbmVudChyZW5kZXJpbmcuZmFjdG9yeSwgcmVuZGVyaW5nLmRhdGEpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHRoaXMubWV0YWRhdGFNb2RlICYmXHJcbiAgICAgICAgICAgIHRoaXMudmlldy5jcmVhdGVFbWJlZGRlZFZpZXcodGhpcy5tZXRhZGF0YU5vZGUsIHtcclxuICAgICAgICAgICAgICBraW5kOiBNZXRhZGF0YUtpbmQuQ2xvc2UsXHJcbiAgICAgICAgICAgICAgY2hyb21lVHlwZTogJ3JlbmRlcmluZycsXHJcbiAgICAgICAgICAgICAgcmVuZGVyaW5nSWQ6IChyZW5kZXJpbmcuZmFjdG9yeS5jb21wb25lbnREZWZpbml0aW9uIGFzIENvbXBvbmVudFJlbmRlcmluZyk/LnVpZCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcclxuICAgICAgICB0aGlzLmxvYWRlZC5lbWl0KHRoaXMubmFtZSk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgSnNzQ2FuQWN0aXZhdGVSZWRpcmVjdEVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCByZWRpcmVjdFZhbHVlID0gZS5yZWRpcmVjdFZhbHVlO1xyXG4gICAgICAgICAgaWYgKHJlZGlyZWN0VmFsdWUgaW5zdGFuY2VvZiBVcmxUcmVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwocmVkaXJlY3RWYWx1ZSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByZWRpcmVjdFZhbHVlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbcmVkaXJlY3RWYWx1ZV0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUocmVkaXJlY3RWYWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRoaXMuZmFpbGVkLmVtaXQoZSBhcyBFcnJvcik7XHJcbiAgICAgICAgICBjb25zb2xlLndhcm4oXHJcbiAgICAgICAgICAgIGBQbGFjZWhvbGRlciAnJHt0aGlzLm5hbWV9JyB3YXMgbm90IGFibGUgdG8gcmVuZGVyIHdpdGggdGhlIGN1cnJlbnQgcmVuZGVyaW5nIGRhdGEgYW5kIGVycm9yYCxcclxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5yZW5kZXJpbmcsIG51bGwsIDIpLFxyXG4gICAgICAgICAgICBlXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfcmVuZGVyVGVtcGxhdGVkQ29tcG9uZW50KHJlbmRlcmluZzogQ29tcG9uZW50UmVuZGVyaW5nIHwgSHRtbEVsZW1lbnRSZW5kZXJpbmcpIHtcclxuICAgIC8vIHRoZSByZW5kZXItZWFjaCB0ZW1wbGF0ZSB0YWtlcyBjYXJlIG9mIGFsbCBjb21wb25lbnQgbWFwcGluZyBldGNcclxuICAgIC8vIGdlbmVyYWxseSB1c2luZyA8c2MtcmVuZGVyLWNvbXBvbmVudD4gd2hpY2ggaXMgYWJvdXQgbGlrZSBfcmVuZGVyRW1iZWRkZWRDb21wb25lbnQoKVxyXG4gICAgLy8gYXMgYSBzZXBhcmF0ZSBjb21wb25lbnRcclxuICAgIHRoaXMudmlldy5jcmVhdGVFbWJlZGRlZFZpZXcodGhpcy5yZW5kZXJFYWNoVGVtcGxhdGUudGVtcGxhdGVSZWYsIHtcclxuICAgICAgcmVuZGVyaW5nLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9yZW5kZXJFbWJlZGRlZENvbXBvbmVudChyZW5kZXJpbmc6IENvbXBvbmVudEZhY3RvcnlSZXN1bHQsIGRhdGE6IERhdGEpIHtcclxuICAgIGlmIChcclxuICAgICAgKHJlbmRlcmluZy5jb21wb25lbnREZWZpbml0aW9uIGFzIENvbXBvbmVudFJlbmRlcmluZykuY29tcG9uZW50TmFtZSA9PT1cclxuICAgICAgY29uc3RhbnRzLkhJRERFTl9SRU5ERVJJTkdfTkFNRVxyXG4gICAgKSB7XHJcbiAgICAgIHJlbmRlcmluZy5jb21wb25lbnRJbXBsZW1lbnRhdGlvbiA9IHRoaXMuaGlkZGVuUmVuZGVyaW5nQ29tcG9uZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghcmVuZGVyaW5nLmNvbXBvbmVudEltcGxlbWVudGF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSAocmVuZGVyaW5nLmNvbXBvbmVudERlZmluaXRpb24gYXMgQ29tcG9uZW50UmVuZGVyaW5nKS5jb21wb25lbnROYW1lO1xyXG4gICAgICBjb25zb2xlLmVycm9yKFxyXG4gICAgICAgIGBQbGFjZWhvbGRlciAke3RoaXMubmFtZX0gY29udGFpbnMgdW5rbm93biBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gLFxyXG4gICAgICAgIGBFbnN1cmUgY29tcG9uZW50IGlzIG1hcHBlZCwgbGlrZTpcclxuICAgICAgICBKc3NNb2R1bGUud2l0aENvbXBvbmVudHMoW1xyXG4gICAgICAgICAgeyBuYW1lOiAnJHtjb21wb25lbnROYW1lfScsIHR5cGU6ICR7Y29tcG9uZW50TmFtZX1Db21wb25lbnQgfVxyXG4gICAgICAgIF0pYFxyXG4gICAgICApO1xyXG5cclxuICAgICAgcmVuZGVyaW5nLmNvbXBvbmVudEltcGxlbWVudGF0aW9uID0gdGhpcy5taXNzaW5nQ29tcG9uZW50Q29tcG9uZW50O1xyXG4gICAgfVxyXG4gICAgLy8gYXBwbHkgdGhlIHBhcmVudCBzdHlsZSBhdHRyaWJ1dGUgX25nY29udGVudFxyXG4gICAgLy8gd29yay1hcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIvaXNzdWVzLzEyMjE1XHJcbiAgICBjb25zdCBjcmVhdGVkQ29tcG9uZW50UmVmID0gdGhpcy52aWV3LmNyZWF0ZUNvbXBvbmVudChyZW5kZXJpbmcuY29tcG9uZW50SW1wbGVtZW50YXRpb24sIHtcclxuICAgICAgbmdNb2R1bGVSZWY6IHJlbmRlcmluZy5jb21wb25lbnRNb2R1bGVSZWYsXHJcbiAgICB9KTtcclxuICAgIGlmICh0aGlzLnBhcmVudFN0eWxlQXR0cmlidXRlKSB7XHJcbiAgICAgIHRoaXMucmVuZGVyZXIuc2V0QXR0cmlidXRlKFxyXG4gICAgICAgIGNyZWF0ZWRDb21wb25lbnRSZWYubG9jYXRpb24ubmF0aXZlRWxlbWVudCxcclxuICAgICAgICB0aGlzLnBhcmVudFN0eWxlQXR0cmlidXRlLFxyXG4gICAgICAgICcnXHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29tcG9uZW50SW5zdGFuY2UgPSBjcmVhdGVkQ29tcG9uZW50UmVmLmluc3RhbmNlO1xyXG4gICAgY29tcG9uZW50SW5zdGFuY2UucmVuZGVyaW5nID0gcmVuZGVyaW5nLmNvbXBvbmVudERlZmluaXRpb247XHJcbiAgICBjb21wb25lbnRJbnN0YW5jZS5kYXRhID0gZGF0YTtcclxuXHJcbiAgICBpZiAodGhpcy5faW5wdXRzKSB7XHJcbiAgICAgIHRoaXMuX3NldENvbXBvbmVudElucHV0cyhjb21wb25lbnRJbnN0YW5jZSwgdGhpcy5faW5wdXRzKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLm91dHB1dHMpIHtcclxuICAgICAgdGhpcy5fc3Vic2NyaWJlQ29tcG9uZW50T3V0cHV0cyhjb21wb25lbnRJbnN0YW5jZSwgdGhpcy5vdXRwdXRzKTtcclxuICAgIH1cclxuICAgIHRoaXMuX2NvbXBvbmVudEluc3RhbmNlcy5wdXNoKGNvbXBvbmVudEluc3RhbmNlKTtcclxuICB9XHJcbn1cclxuIl19","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}